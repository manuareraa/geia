"use strict";(self.webpackChunkgeoblocs=self.webpackChunkgeoblocs||[]).push([[9144],{58298:function(t,n,r){r.d(n,{D:function(){return W},F:function(){return d},I:function(){return p},a:function(){return l},b:function(){return w},c:function(){return g},f:function(){return h},g:function(){return y},u:function(){return x}});var e=r(29439),a=r(74165),i=r(1413),u=r(15861),o=r(27207),c=r(49716),s=r(2257),f=r(34029),p=function(){return c.arrayify("0x80ac58cd")}(),l=function(){return c.arrayify("0xd9b67a26")}(),d={name:"Failed to load NFT metadata"};function h(t,n,r){return b.apply(this,arguments)}function b(){return(b=(0,u.Z)((0,a.Z)().mark((function t(n,r,e){var u,f,p,l,h;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.startsWith("data:application/json;base64")||"undefined"===typeof Buffer){t.next=4;break}return u=r.split(",")[1],f=JSON.parse(Buffer.from(u,"base64").toString("utf-8")),t.abrupt("return",o.a.parse((0,i.Z)((0,i.Z)({},f),{},{id:s.O$.from(n).toString(),uri:r})));case 4:return p=r.replace("{id}",c.hexZeroPad(s.O$.from(n).toHexString(),32).slice(2)),t.prev=5,t.next=8,e.downloadJSON(p);case 8:l=t.sent,t.next=24;break;case 11:return t.prev=11,t.t0=t.catch(5),h=r.replace("{id}",s.O$.from(n).toString()),t.prev=14,t.next=17,e.downloadJSON(h);case 17:l=t.sent,t.next=24;break;case 20:t.prev=20,t.t1=t.catch(14),console.warn("failed to get token metadata: ".concat(JSON.stringify({tokenId:n.toString(),tokenUri:r})," -- falling back to default metadata")),l=d;case 24:return t.abrupt("return",o.a.parse((0,i.Z)((0,i.Z)({},l),{},{id:s.O$.from(n).toString(),uri:r})));case 25:case"end":return t.stop()}}),t,null,[[5,11],[14,20]])})))).apply(this,arguments)}function g(t,n,r,e){return v.apply(this,arguments)}function v(){return(v=(0,u.Z)((0,a.Z)().mark((function t(n,u,c,b){var g,v,w,m,x,k,y,Z,z,W,C;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.e(5025).then(r.t.bind(r,25025,19));case 2:return v=t.sent.default,w=new f.CH(n,v,u),t.next=6,Promise.all([w.supportsInterface(p),w.supportsInterface(l)]);case 6:if(m=t.sent,x=(0,e.Z)(m,2),k=x[0],y=x[1],!k){t.next=20;break}return t.next=13,Promise.resolve().then(r.t.bind(r,34161,19));case 13:return Z=t.sent.default,z=new f.CH(n,Z,u),t.next=17,z.tokenURI(c);case 17:case 27:g=t.sent,t.next=31;break;case 20:if(!y){t.next=30;break}return t.next=23,Promise.resolve().then(r.t.bind(r,50266,19));case 23:return W=t.sent.default,C=new f.CH(n,W,u),t.next=27,C.uri(c);case 30:throw Error("Contract must implement ERC 1155 or ERC 721.");case 31:if(g){t.next=33;break}return t.abrupt("return",o.a.parse((0,i.Z)((0,i.Z)({},d),{},{id:s.O$.from(c).toString(),uri:""})));case 33:return t.abrupt("return",h(c,g,b));case 34:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function w(t,n){return m.apply(this,arguments)}function m(){return(m=(0,u.Z)((0,a.Z)().mark((function t(n,r){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!==typeof n){t.next=4;break}return t.abrupt("return",n);case 4:return t.next=6,r.upload(o.C.parse(n));case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function x(t,n,r,e){return k.apply(this,arguments)}function k(){return(k=(0,u.Z)((0,a.Z)().mark((function t(n,r,e,i){var u;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Z(n)){t.next=4;break}return t.abrupt("return",n);case 4:if(!z(n)){t.next=11;break}return t.next=7,r.uploadBatch(n.map((function(t){return o.C.parse(t)})),{rewriteFileNames:{fileStartNumber:e||0},onProgress:null===i||void 0===i?void 0:i.onProgress});case 7:return u=t.sent,t.abrupt("return",u);case 11:throw new Error("NFT metadatas must all be of the same type (all URI or all NFTMetadataInput)");case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function y(t){for(var n=t[0].substring(0,t[0].lastIndexOf("/")),r=0;r<t.length;r++){var e=t[r].substring(0,t[r].lastIndexOf("/"));if(n!==e)throw new Error("Can only create batches with the same base URI for every entry in the batch. Expected '".concat(n,"' but got '").concat(e,"'"))}return n.replace(/\/$/,"")+"/"}function Z(t){return void 0===t.find((function(t){return"string"!==typeof t}))}function z(t){return void 0===t.find((function(t){return"object"!==typeof t}))}var W=100},61146:function(t,n,r){r.d(n,{E:function(){return c},R:function(){return u},S:function(){return o},a:function(){return s}});var e=r(2257),a=r(60874),i=r(18392),u=function(){return a.z.union([a.z.date().transform((function(t){return e.O$.from(Math.floor(t.getTime()/1e3))})),a.z.number().transform((function(t){return e.O$.from(t)}))])}(),o=function(){return u.default(new Date(0))}(),c=function(){return u.default(new Date(Date.now()+31536e7))}();function s(t,n){if(!t)throw new i.x(n);return t}},72106:function(t,n,r){r.d(n,{C:function(){return i}});var e=r(15671),a=r(43144),i=function(){function t(n){(0,e.Z)(this,t),this.contractWrapper=n}return(0,a.Z)(t,[{key:"overrideNextTransaction",value:function(t){this.contractWrapper.withTransactionOverride(t)}}]),t}()},67156:function(t,n,r){r.r(n),r.d(n,{MarketplaceV3:function(){return v}});var e=r(74165),a=r(15861),i=r(15671),u=r(43144),o=r(4942),c=r(61146),s=r(17953),f=r(18392),p=r(87126),l=r(72106),d=r(109),h=r(73584),b=r(76449),g=r(12644),v=(r(80518),r(66315),r(98528),function(){function t(n,r,e){(0,i.Z)(this,t);var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:new f.cs(n,r,u,a,e);this._chainId=o,this.abi=f.bk.parse(u||[]),this.contractWrapper=c,this.storage=e,this.metadata=new s.C(this.contractWrapper,f.b$,this.storage),this.app=new s.b(this.contractWrapper,this.metadata,this.storage),this.roles=new h.C(this.contractWrapper,t.contractRoles),this.encoder=new p.C(this.contractWrapper),this.estimator=new s.G(this.contractWrapper),this.events=new s.a(this.contractWrapper),this.platformFees=new d.C(this.contractWrapper),this.interceptor=new l.C(this.contractWrapper)}return(0,u.Z)(t,[{key:"directListings",get:function(){return(0,c.a)(this.detectDirectListings(),f.dx)}},{key:"englishAuctions",get:function(){return(0,c.a)(this.detectEnglishAuctions(),f.dy)}},{key:"offers",get:function(){return(0,c.a)(this.detectOffers(),f.dz)}},{key:"chainId",get:function(){return this._chainId}},{key:"onNetworkUpdated",value:function(t){this.contractWrapper.updateSignerOrProvider(t)}},{key:"getAddress",value:function(){return this.contractWrapper.address}},{key:"prepare",value:function(){var t=(0,a.Z)((0,e.Z)().mark((function t(n,r,a){return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",g.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:n,args:r,overrides:a}));case 1:case"end":return t.stop()}}),t,this)})));return function(n,r,e){return t.apply(this,arguments)}}()},{key:"call",value:function(){var t=(0,a.Z)((0,e.Z)().mark((function t(n,r,a){return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.contractWrapper.call(n,r,a));case 1:case"end":return t.stop()}}),t,this)})));return function(n,r,e){return t.apply(this,arguments)}}()},{key:"detectDirectListings",value:function(){if((0,s.d)(this.contractWrapper,"DirectListings"))return new b.M(this.contractWrapper,this.storage)}},{key:"detectEnglishAuctions",value:function(){if((0,s.d)(this.contractWrapper,"EnglishAuctions"))return new b.a(this.contractWrapper,this.storage)}},{key:"detectOffers",value:function(){if((0,s.d)(this.contractWrapper,"Offers"))return new b.b(this.contractWrapper,this.storage)}}]),t}());(0,o.Z)(v,"contractRoles",f.dE)},27207:function(t,n,r){r.d(n,{B:function(){return f},C:function(){return p},N:function(){return l},a:function(){return d},s:function(){return h}});var e=r(74165),a=r(15861),i=r(18392),u=r(60874),o=r(87126),c=function(){return u.z.object({}).catchall(u.z.union([i.cx,u.z.unknown()]))}(),s=function(){return u.z.union([u.z.array(u.z.array(c)).transform((function(t){return t.flat()})),u.z.array(c),c]).optional().nullable()}(),f=function(){return u.z.object({name:u.z.union([u.z.string(),u.z.number()]).optional().nullable(),description:u.z.string().nullable().optional().nullable(),image:i.cy.nullable().optional(),animation_url:i.cy.optional().nullable()})}(),p=function(){return f.extend({external_url:i.cy.nullable().optional(),background_color:i.cz.optional().nullable(),properties:s,attributes:s}).catchall(u.z.union([i.cx,u.z.unknown()]))}(),l=function(){return u.z.union([p,u.z.string()])}(),d=function(){return p.extend({id:u.z.string(),uri:u.z.string(),image:u.z.string().nullable().optional(),external_url:u.z.string().nullable().optional(),animation_url:u.z.string().nullable().optional()})}();function h(t,n,r,e){return b.apply(this,arguments)}function b(){return(b=(0,a.Z)((0,e.Z)().mark((function t(n,a,u,c){var s,f,p,l,d,h;return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(0,o.i)(u)){t.next=4;break}c.value=a,t.next=21;break;case 4:return t.next=6,Promise.resolve().then(r.t.bind(r,49242,19));case 6:return s=t.sent.default,f=n.getSigner(),p=n.getProvider(),l=new i.cs(f||p,u,s,n.options,n.storage),t.next=12,n.getSignerAddress();case 12:return d=t.sent,h=n.address,t.next=16,l.read("allowance",[d,h]);case 16:if(!t.sent.lt(a)){t.next=20;break}return t.next=20,l.sendTransaction("approve",[h,a]);case 20:return t.abrupt("return",c);case 21:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}}]);
//# sourceMappingURL=9144.1c77e863.chunk.js.map
"use strict";(self.webpackChunkgeoblocs=self.webpackChunkgeoblocs||[]).push([[282],{18541:function(t,n,e){e.d(n,{W:function(){return s}});var r=e(15671),i=e(43144),a=e(60136),c=e(29388),o=e(29278),s=function(t){(0,a.Z)(e,t);var n=(0,c.Z)(e);function e(t){var i;(0,r.Z)(this,e);var a=t.chains,c=void 0===a?o.gL9:a,s=t.options;return(i=n.call(this)).chains=c,i.options=s,i}return(0,i.Z)(e,[{key:"getBlockExplorerUrls",value:function(t){var n,e,r=null!==(n=null===(e=t.explorers)||void 0===e?void 0:e.map((function(t){return t.url})))&&void 0!==n?n:[];return r.length>0?r:void 0}},{key:"isChainUnsupported",value:function(t){return!this.chains.some((function(n){return n.chainId===t}))}},{key:"updateChains",value:function(t){this.chains=t}}]),e}(e(38080).Z)},18052:function(t,n,e){function r(t){return"string"===typeof t?Number.parseInt(t,"0x"===t.trim().substring(0,2)?16:10):"bigint"===typeof t?Number(t):t}e.d(n,{n:function(){return r}})},40282:function(t,n,e){e.r(n),e.d(n,{MagicAuthConnector:function(){return m},MagicBaseConnector:function(){return x}});var r=e(1413),i=e(74165),a=e(15861),c=e(15671),o=e(43144),s=e(97326),u=e(60136),h=e(29388),p=e(9302),d=e(18052),f=e(60723),v=e(97419),g=e(23816),l=e(57970),k=e(18541),x=(e(38080),function(t){(0,u.Z)(e,t);var n=(0,h.Z)(e);function e(t){var r;return(0,c.Z)(this,e),r=n.call(this,t),(0,p._)((0,s.Z)(r),"id","magic-link"),(0,p._)((0,s.Z)(r),"name","Magic Link"),(0,p._)((0,s.Z)(r),"ready",!0),r.magicOptions=t.options,r}return(0,o.Z)(e,[{key:"getAccount",value:function(){var t=(0,a.Z)((0,i.Z)().mark((function t(){var n,e,r;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=f.Q,t.next=3,this.getProvider();case 3:return t.t1=t.sent,n=new t.t0(t.t1),e=n.getSigner(),t.next=8,e.getAddress();case 8:if(!(r=t.sent).startsWith("0x")){t.next=11;break}return t.abrupt("return",r);case 11:return t.abrupt("return","0x".concat(r));case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getProvider",value:function(){var t=(0,a.Z)((0,i.Z)().mark((function t(){var n;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.provider){t.next=2;break}return t.abrupt("return",this.provider);case 2:return n=this.getMagicSDK(),this.provider=n.rpcProvider,t.abrupt("return",this.provider);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getSigner",value:function(){var t=(0,a.Z)((0,i.Z)().mark((function t(){var n,e;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=f.Q,t.next=3,this.getProvider();case 3:return t.t1=t.sent,n=new t.t0(t.t1),t.next=7,n.getSigner();case 7:return e=t.sent,t.abrupt("return",e);case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"isAuthorized",value:function(){var t=(0,a.Z)((0,i.Z)().mark((function t(){var n;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.getMagicSDK(),t.prev=1,t.next=4,n.user.isLoggedIn();case 4:return t.abrupt("return",t.sent);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t,this,[[1,7]])})));return function(){return t.apply(this,arguments)}}()},{key:"onAccountsChanged",value:function(t){0===t.length?this.emit("disconnect"):t[0]&&this.emit("change",{account:v.getAddress(t[0])})}},{key:"onChainChanged",value:function(t){var n=(0,d.n)(t),e=this.isChainUnsupported(n);this.emit("change",{chain:{id:n,unsupported:e}})}},{key:"onDisconnect",value:function(){this.emit("disconnect")}},{key:"disconnect",value:function(){var t=(0,a.Z)((0,i.Z)().mark((function t(){var n;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.getMagicSDK(),t.next=3,n.user.logout();case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),e}(k.W)),m=function(t){(0,u.Z)(e,t);var n=(0,h.Z)(e);function e(t){var r,i,a;return(0,c.Z)(this,e),(a=n.call(this,t)).magicSdkConfiguration=t.options.magicSdkConfiguration,a._type=t.options.type,a.oauthProviders=(null===(r=t.options.oauthOptions)||void 0===r?void 0:r.providers)||[],a.oauthRedirectURI=null===(i=t.options.oauthOptions)||void 0===i?void 0:i.redirectURI,a}return(0,o.Z)(e,[{key:"connect",value:function(){var t=(0,a.Z)((0,i.Z)().mark((function t(n){var e,r,a,c,o,s;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.magicOptions.apiKey){t.next=2;break}throw new Error("Magic API Key is not provided.");case 2:return t.prev=2,n.chainId&&this.initializeMagicSDK({chainId:n.chainId}),t.next=6,this.getProvider();case 6:return e=t.sent,this.setupListeners(),this.emit("message",{type:"connecting"}),t.next=11,this.isAuthorized();case 11:return r=t.sent,t.prev=12,t.next=15,this.getChainId();case 15:a=t.sent,t.next=21;break;case 18:t.prev=18,t.t0=t.catch(12),a=0;case 21:if(this._connectedChainId=a,!r){t.next=29;break}return t.t1=e,t.t2={id:a,unsupported:!1},t.next=27,this.getAccount();case 27:return t.t3=t.sent,t.abrupt("return",{provider:t.t1,chain:t.t2,account:t.t3});case 29:if(c=this.getMagicSDK(),"connect"!==this._type){t.next=36;break}return("email"in n||"phoneNumber"in n)&&console.warn("Passing email or phoneNumber is not required for Magic Connect"),t.next=34,c.wallet.connectWithUI();case 34:t.next=54;break;case 36:if(!("oauthProvider"in n)){t.next=43;break}return t.next=39,c.oauth.loginWithRedirect({provider:n.oauthProvider,redirectURI:this.oauthRedirectURI||window.location.href});case 39:return t.next=41,new Promise((function(t){setTimeout(t,1e4)}));case 41:t.next=54;break;case 43:if(!("email"in n)){t.next=48;break}return t.next=46,c.auth.loginWithMagicLink({email:n.email,showUI:!0});case 46:t.next=54;break;case 48:if(!("phoneNumber"in n)){t.next=53;break}return t.next=51,c.auth.loginWithSMS({phoneNumber:n.phoneNumber});case 51:t.next=54;break;case 53:throw new Error("Invalid options: Either provide and email, phoneNumber or oauthProvider when using Magic Auth");case 54:return t.next=56,this.getSigner();case 56:return o=t.sent,t.next=59,o.getAddress();case 59:return(s=t.sent).startsWith("0x")||(s="0x".concat(s)),t.abrupt("return",{account:s,chain:{id:a,unsupported:!1},provider:e});case 64:throw t.prev=64,t.t4=t.catch(2),console.error(t.t4),new Error("Something went wrong");case 68:case"end":return t.stop()}}),t,this,[[2,64],[12,18]])})));return function(n){return t.apply(this,arguments)}}()},{key:"getChainId",value:function(){var t=(0,a.Z)((0,i.Z)().mark((function t(){var n,e,r;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("object"!==typeof(e=null===(n=this.magicSdkConfiguration)||void 0===n?void 0:n.network)){t.next=5;break}if(!(r=e.chainId)){t.next=5;break}return t.abrupt("return",(0,d.n)(r));case 5:throw new Error("Chain ID is not defined");case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"initializeMagicSDK",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).chainId,n=(0,r.Z)((0,r.Z)({},this.magicSdkConfiguration),{},{extensions:[new g.XX]});if(t){var e=this.chains.find((function(n){return n.chainId===t}));e&&(n.network={rpcUrl:e.rpc[0]||"",chainId:e.chainId})}return this.magicSDK=new l.s$(this.magicOptions.apiKey,n),this.provider=this.magicSDK.rpcProvider,this.magicSDK}},{key:"getMagicSDK",value:function(){return this.magicSDK?this.magicSDK:this.initializeMagicSDK()}},{key:"setupListeners",value:function(){var t=(0,a.Z)((0,i.Z)().mark((function t(){var n;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getProvider();case 2:(n=t.sent).on("accountsChanged",this.onAccountsChanged),n.on("chainChanged",this.onChainChanged),n.on("disconnect",this.onDisconnect);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"switchChain",value:function(){var t=(0,a.Z)((0,i.Z)().mark((function t(n){var e;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.chains.find((function(t){return t.chainId===n}))){t.next=3;break}throw new Error("Chain not found");case 3:return this._connectedChainId!==n&&this.initializeMagicSDK({chainId:n}),t.abrupt("return",e);case 5:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}()}]),e}(x)}}]);
//# sourceMappingURL=282.42bb7efa.chunk.js.map
/*! For license information please see 5938.e9cab1d1.chunk.js.LICENSE.txt */
(self.webpackChunkgeoblocs=self.webpackChunkgeoblocs||[]).push([[5938],{5454:function(t,e,r){"use strict";var n=r(56690).default,i=r(89728).default,a=r(66115).default,o=r(61655).default,u=r(26389).default,s=r(2009),f=r(27722),c="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.lW=p,e.h2=50;var l=2147483647;function h(t){if(t>l)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,p.prototype),e}function p(t,e,r){if("number"===typeof t){if("string"===typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return m(t)}return y(t,e,r)}function y(t,e,r){if("string"===typeof t)return function(t,e){"string"===typeof e&&""!==e||(e="utf8");if(!p.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=0|w(t,e),n=h(r),i=n.write(t,e);i!==r&&(n=n.slice(0,i));return n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(tt(t,Uint8Array)){var e=new Uint8Array(t);return v(e.buffer,e.byteOffset,e.byteLength)}return g(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(tt(t,ArrayBuffer)||t&&tt(t.buffer,ArrayBuffer))return v(t,e,r);if("undefined"!==typeof SharedArrayBuffer&&(tt(t,SharedArrayBuffer)||t&&tt(t.buffer,SharedArrayBuffer)))return v(t,e,r);if("number"===typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return p.from(n,e,r);var i=function(t){if(p.isBuffer(t)){var e=0|b(t.length),r=h(e);return 0===r.length||t.copy(r,0,0,e),r}if(void 0!==t.length)return"number"!==typeof t.length||et(t.length)?h(0):g(t);if("Buffer"===t.type&&Array.isArray(t.data))return g(t.data)}(t);if(i)return i;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof t[Symbol.toPrimitive])return p.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function d(t){if("number"!==typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function m(t){return d(t),h(t<0?0:0|b(t))}function g(t){for(var e=t.length<0?0:0|b(t.length),r=h(e),n=0;n<e;n+=1)r[n]=255&t[n];return r}function v(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,p.prototype),n}function b(t){if(t>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return 0|t}function w(t,e){if(p.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||tt(t,ArrayBuffer))return t.byteLength;if("string"!==typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return K(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Q(t).length;default:if(i)return n?-1:K(t).length;e=(""+e).toLowerCase(),i=!0}}function x(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return C(this,e,r);case"utf8":case"utf-8":return U(this,e,r);case"ascii":return L(this,e,r);case"latin1":case"binary":return R(this,e,r);case"base64":return P(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function k(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function B(t,e,r,n,i){if(0===t.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),et(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"===typeof e&&(e=p.from(e,n)),p.isBuffer(e))return 0===e.length?-1:E(t,e,r,n,i);if("number"===typeof e)return e&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):E(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function E(t,e,r,n,i){var a,o=1,u=t.length,s=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;o=2,u/=2,s/=2,r/=2}function f(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){var c=-1;for(a=r;a<u;a++)if(f(t,a)===f(e,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===s)return c*o}else-1!==c&&(a-=a-c),c=-1}else for(r+s>u&&(r=u-s),a=r;a>=0;a--){for(var l=!0,h=0;h<s;h++)if(f(t,a+h)!==f(e,h)){l=!1;break}if(l)return a}return-1}function S(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var a,o=e.length;for(n>o/2&&(n=o/2),a=0;a<n;++a){var u=parseInt(e.substr(2*a,2),16);if(et(u))return a;t[r+a]=u}return a}function T(t,e,r,n){return X(K(e,t.length-r),t,r,n)}function A(t,e,r,n){return X(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function Z(t,e,r,n){return X(Q(e),t,r,n)}function I(t,e,r,n){return X(function(t,e){for(var r,n,i,a=[],o=0;o<t.length&&!((e-=2)<0);++o)n=(r=t.charCodeAt(o))>>8,i=r%256,a.push(i),a.push(n);return a}(e,t.length-r),t,r,n)}function P(t,e,r){return 0===e&&r===t.length?s.fromByteArray(t):s.fromByteArray(t.slice(e,r))}function U(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var a=t[i],o=null,u=a>239?4:a>223?3:a>191?2:1;if(i+u<=r){var s=void 0,f=void 0,c=void 0,l=void 0;switch(u){case 1:a<128&&(o=a);break;case 2:128===(192&(s=t[i+1]))&&(l=(31&a)<<6|63&s)>127&&(o=l);break;case 3:s=t[i+1],f=t[i+2],128===(192&s)&&128===(192&f)&&(l=(15&a)<<12|(63&s)<<6|63&f)>2047&&(l<55296||l>57343)&&(o=l);break;case 4:s=t[i+1],f=t[i+2],c=t[i+3],128===(192&s)&&128===(192&f)&&128===(192&c)&&(l=(15&a)<<18|(63&s)<<12|(63&f)<<6|63&c)>65535&&l<1114112&&(o=l)}}null===o?(o=65533,u=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=u}return function(t){var e=t.length;if(e<=O)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=O));return r}(n)}p.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(r){return!1}}(),p.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}}),p.poolSize=8192,p.from=function(t,e,r){return y(t,e,r)},Object.setPrototypeOf(p.prototype,Uint8Array.prototype),Object.setPrototypeOf(p,Uint8Array),p.alloc=function(t,e,r){return function(t,e,r){return d(t),t<=0?h(t):void 0!==e?"string"===typeof r?h(t).fill(e,r):h(t).fill(e):h(t)}(t,e,r)},p.allocUnsafe=function(t){return m(t)},p.allocUnsafeSlow=function(t){return m(t)},p.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==p.prototype},p.compare=function(t,e){if(tt(t,Uint8Array)&&(t=p.from(t,t.offset,t.byteLength)),tt(e,Uint8Array)&&(e=p.from(e,e.offset,e.byteLength)),!p.isBuffer(t)||!p.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var r=t.length,n=e.length,i=0,a=Math.min(r,n);i<a;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},p.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return p.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=p.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var a=t[r];if(tt(a,Uint8Array))i+a.length>n.length?(p.isBuffer(a)||(a=p.from(a)),a.copy(n,i)):Uint8Array.prototype.set.call(n,a,i);else{if(!p.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i)}i+=a.length}return n},p.byteLength=w,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)k(this,e,e+1);return this},p.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)k(this,e,e+3),k(this,e+1,e+2);return this},p.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)k(this,e,e+7),k(this,e+1,e+6),k(this,e+2,e+5),k(this,e+3,e+4);return this},p.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?U(this,0,t):x.apply(this,arguments)},p.prototype.toLocaleString=p.prototype.toString,p.prototype.equals=function(t){if(!p.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===p.compare(this,t)},p.prototype.inspect=function(){var t="",r=e.h2;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},c&&(p.prototype[c]=p.prototype.inspect),p.prototype.compare=function(t,e,r,n,i){if(tt(t,Uint8Array)&&(t=p.from(t,t.offset,t.byteLength)),!p.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var a=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(e>>>=0),u=Math.min(a,o),s=this.slice(n,i),f=t.slice(e,r),c=0;c<u;++c)if(s[c]!==f[c]){a=s[c],o=f[c];break}return a<o?-1:o<a?1:0},p.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},p.prototype.indexOf=function(t,e,r){return B(this,t,e,r,!0)},p.prototype.lastIndexOf=function(t,e,r){return B(this,t,e,r,!1)},p.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"===typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return S(this,t,e,r);case"utf8":case"utf-8":return T(this,t,e,r);case"ascii":case"latin1":case"binary":return A(this,t,e,r);case"base64":return Z(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,e,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var O=4096;function L(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function R(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function C(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",a=e;a<r;++a)i+=rt[t[a]];return i}function M(t,e,r){for(var n=t.slice(e,r),i="",a=0;a<n.length-1;a+=2)i+=String.fromCharCode(n[a]+256*n[a+1]);return i}function N(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function z(t,e,r,n,i,a){if(!p.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function W(t,e,r,n,i){J(e,n,i,t,r,7);var a=Number(e&BigInt(4294967295));t[r++]=a,a>>=8,t[r++]=a,a>>=8,t[r++]=a,a>>=8,t[r++]=a;var o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,r}function F(t,e,r,n,i){J(e,n,i,t,r,7);var a=Number(e&BigInt(4294967295));t[r+7]=a,a>>=8,t[r+6]=a,a>>=8,t[r+5]=a,a>>=8,t[r+4]=a;var o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=o,o>>=8,t[r+2]=o,o>>=8,t[r+1]=o,o>>=8,t[r]=o,r+8}function H(t,e,r,n,i,a){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function D(t,e,r,n,i){return e=+e,r>>>=0,i||H(t,0,r,4),f.write(t,e,r,n,23,4),r+4}function j(t,e,r,n,i){return e=+e,r>>>=0,i||H(t,0,r,8),f.write(t,e,r,n,52,8),r+8}p.prototype.slice=function(t,e){var r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var n=this.subarray(t,e);return Object.setPrototypeOf(n,p.prototype),n},p.prototype.readUintLE=p.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||N(t,e,this.length);for(var n=this[t],i=1,a=0;++a<e&&(i*=256);)n+=this[t+a]*i;return n},p.prototype.readUintBE=p.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||N(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},p.prototype.readUint8=p.prototype.readUInt8=function(t,e){return t>>>=0,e||N(t,1,this.length),this[t]},p.prototype.readUint16LE=p.prototype.readUInt16LE=function(t,e){return t>>>=0,e||N(t,2,this.length),this[t]|this[t+1]<<8},p.prototype.readUint16BE=p.prototype.readUInt16BE=function(t,e){return t>>>=0,e||N(t,2,this.length),this[t]<<8|this[t+1]},p.prototype.readUint32LE=p.prototype.readUInt32LE=function(t,e){return t>>>=0,e||N(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},p.prototype.readUint32BE=p.prototype.readUInt32BE=function(t,e){return t>>>=0,e||N(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},p.prototype.readBigUInt64LE=nt((function(t){$(t>>>=0,"offset");var e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Y(t,this.length-8);var n=e+this[++t]*Math.pow(2,8)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,24),i=this[++t]+this[++t]*Math.pow(2,8)+this[++t]*Math.pow(2,16)+r*Math.pow(2,24);return BigInt(n)+(BigInt(i)<<BigInt(32))})),p.prototype.readBigUInt64BE=nt((function(t){$(t>>>=0,"offset");var e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Y(t,this.length-8);var n=e*Math.pow(2,24)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,8)+this[++t],i=this[++t]*Math.pow(2,24)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,8)+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),p.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||N(t,e,this.length);for(var n=this[t],i=1,a=0;++a<e&&(i*=256);)n+=this[t+a]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},p.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||N(t,e,this.length);for(var n=e,i=1,a=this[t+--n];n>0&&(i*=256);)a+=this[t+--n]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*e)),a},p.prototype.readInt8=function(t,e){return t>>>=0,e||N(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},p.prototype.readInt16LE=function(t,e){t>>>=0,e||N(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},p.prototype.readInt16BE=function(t,e){t>>>=0,e||N(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},p.prototype.readInt32LE=function(t,e){return t>>>=0,e||N(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},p.prototype.readInt32BE=function(t,e){return t>>>=0,e||N(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},p.prototype.readBigInt64LE=nt((function(t){$(t>>>=0,"offset");var e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Y(t,this.length-8);var n=this[t+4]+this[t+5]*Math.pow(2,8)+this[t+6]*Math.pow(2,16)+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(e+this[++t]*Math.pow(2,8)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,24))})),p.prototype.readBigInt64BE=nt((function(t){$(t>>>=0,"offset");var e=this[t],r=this[t+7];void 0!==e&&void 0!==r||Y(t,this.length-8);var n=(e<<24)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,8)+this[++t];return(BigInt(n)<<BigInt(32))+BigInt(this[++t]*Math.pow(2,24)+this[++t]*Math.pow(2,16)+this[++t]*Math.pow(2,8)+r)})),p.prototype.readFloatLE=function(t,e){return t>>>=0,e||N(t,4,this.length),f.read(this,t,!0,23,4)},p.prototype.readFloatBE=function(t,e){return t>>>=0,e||N(t,4,this.length),f.read(this,t,!1,23,4)},p.prototype.readDoubleLE=function(t,e){return t>>>=0,e||N(t,8,this.length),f.read(this,t,!0,52,8)},p.prototype.readDoubleBE=function(t,e){return t>>>=0,e||N(t,8,this.length),f.read(this,t,!1,52,8)},p.prototype.writeUintLE=p.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e>>>=0,r>>>=0,n)||z(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,a=0;for(this[e]=255&t;++a<r&&(i*=256);)this[e+a]=t/i&255;return e+r},p.prototype.writeUintBE=p.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e>>>=0,r>>>=0,n)||z(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,a=1;for(this[e+i]=255&t;--i>=0&&(a*=256);)this[e+i]=t/a&255;return e+r},p.prototype.writeUint8=p.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||z(this,t,e,1,255,0),this[e]=255&t,e+1},p.prototype.writeUint16LE=p.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||z(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},p.prototype.writeUint16BE=p.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||z(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},p.prototype.writeUint32LE=p.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||z(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},p.prototype.writeUint32BE=p.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||z(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},p.prototype.writeBigUInt64LE=nt((function(t){return W(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),p.prototype.writeBigUInt64BE=nt((function(t){return F(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),p.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);z(this,t,e,r,i-1,-i)}var a=0,o=1,u=0;for(this[e]=255&t;++a<r&&(o*=256);)t<0&&0===u&&0!==this[e+a-1]&&(u=1),this[e+a]=(t/o>>0)-u&255;return e+r},p.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);z(this,t,e,r,i-1,-i)}var a=r-1,o=1,u=0;for(this[e+a]=255&t;--a>=0&&(o*=256);)t<0&&0===u&&0!==this[e+a+1]&&(u=1),this[e+a]=(t/o>>0)-u&255;return e+r},p.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||z(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},p.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||z(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},p.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||z(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},p.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||z(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},p.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||z(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},p.prototype.writeBigInt64LE=nt((function(t){return W(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),p.prototype.writeBigInt64BE=nt((function(t){return F(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),p.prototype.writeFloatLE=function(t,e,r){return D(this,t,e,!0,r)},p.prototype.writeFloatBE=function(t,e,r){return D(this,t,e,!1,r)},p.prototype.writeDoubleLE=function(t,e,r){return j(this,t,e,!0,r)},p.prototype.writeDoubleBE=function(t,e,r){return j(this,t,e,!1,r)},p.prototype.copy=function(t,e,r,n){if(!p.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i=n-r;return this===t&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},p.prototype.fill=function(t,e,r,n){if("string"===typeof t){if("string"===typeof e?(n=e,e=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!p.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){var i=t.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(t=i)}}else"number"===typeof t?t&=255:"boolean"===typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var a;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"===typeof t)for(a=e;a<r;++a)this[a]=t;else{var o=p.isBuffer(t)?t:p.from(t,n),u=o.length;if(0===u)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(a=0;a<r-e;++a)this[a+e]=o[a%u]}return this};var _={};function q(t,e,r){_[t]=function(r){o(f,r);var s=u(f);function f(){var r;return n(this,f),r=s.call(this),Object.defineProperty(a(r),"message",{value:e.apply(a(r),arguments),writable:!0,configurable:!0}),r.name="".concat(r.name," [").concat(t,"]"),r.stack,delete r.name,r}return i(f,[{key:"code",get:function(){return t},set:function(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(t,"]: ").concat(this.message)}}]),f}(r)}function V(t){for(var e="",r=t.length,n="-"===t[0]?1:0;r>=n+4;r-=3)e="_".concat(t.slice(r-3,r)).concat(e);return"".concat(t.slice(0,r)).concat(e)}function J(t,e,r,n,i,a){if(t>r||t<e){var o,u="bigint"===typeof e?"n":"";throw o=a>3?0===e||e===BigInt(0)?">= 0".concat(u," and < 2").concat(u," ** ").concat(8*(a+1)).concat(u):">= -(2".concat(u," ** ").concat(8*(a+1)-1).concat(u,") and < 2 ** ")+"".concat(8*(a+1)-1).concat(u):">= ".concat(e).concat(u," and <= ").concat(r).concat(u),new _.ERR_OUT_OF_RANGE("value",o,t)}!function(t,e,r){$(e,"offset"),void 0!==t[e]&&void 0!==t[e+r]||Y(e,t.length-(r+1))}(n,i,a)}function $(t,e){if("number"!==typeof t)throw new _.ERR_INVALID_ARG_TYPE(e,"number",t)}function Y(t,e,r){if(Math.floor(t)!==t)throw $(t,r),new _.ERR_OUT_OF_RANGE(r||"offset","an integer",t);if(e<0)throw new _.ERR_BUFFER_OUT_OF_BOUNDS;throw new _.ERR_OUT_OF_RANGE(r||"offset",">= ".concat(r?1:0," and <= ").concat(e),t)}q("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?"".concat(t," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),q("ERR_INVALID_ARG_TYPE",(function(t,e){return'The "'.concat(t,'" argument must be of type number. Received type ').concat(typeof e)}),TypeError),q("ERR_OUT_OF_RANGE",(function(t,e,r){var n='The value of "'.concat(t,'" is out of range.'),i=r;return Number.isInteger(r)&&Math.abs(r)>Math.pow(2,32)?i=V(String(r)):"bigint"===typeof r&&(i=String(r),(r>Math.pow(BigInt(2),BigInt(32))||r<-Math.pow(BigInt(2),BigInt(32)))&&(i=V(i)),i+="n"),n+=" It must be ".concat(e,". Received ").concat(i)}),RangeError);var G=/[^+/0-9A-Za-z-_]/g;function K(t,e){var r;e=e||1/0;for(var n=t.length,i=null,a=[],o=0;o<n;++o){if((r=t.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&a.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;a.push(r)}else if(r<2048){if((e-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function Q(t){return s.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(G,"")).length<2)return"";for(;t.length%4!==0;)t+="=";return t}(t))}function X(t,e,r,n){var i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function tt(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function et(t){return t!==t}var rt=function(){for(var t="0123456789abcdef",e=new Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)e[n+i]=t[r]+t[i];return e}();function nt(t){return"undefined"===typeof BigInt?it:t}function it(){throw new Error("BigInt not supported")}},27722:function(t,e){e.read=function(t,e,r,n,i){var a,o,u=8*i-n-1,s=(1<<u)-1,f=s>>1,c=-7,l=r?i-1:0,h=r?-1:1,p=t[e+l];for(l+=h,a=p&(1<<-c)-1,p>>=-c,c+=u;c>0;a=256*a+t[e+l],l+=h,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=n;c>0;o=256*o+t[e+l],l+=h,c-=8);if(0===a)a=1-f;else{if(a===s)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,n),a-=f}return(p?-1:1)*o*Math.pow(2,a-n)},e.write=function(t,e,r,n,i,a){var o,u,s,f=8*a-i-1,c=(1<<f)-1,l=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:a-1,y=n?1:-1,d=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(s=Math.pow(2,-o))<1&&(o--,s*=2),(e+=o+l>=1?h/s:h*Math.pow(2,1-l))*s>=2&&(o++,s/=2),o+l>=c?(u=0,o=c):o+l>=1?(u=(e*s-1)*Math.pow(2,i),o+=l):(u=e*Math.pow(2,l-1)*Math.pow(2,i),o=0));i>=8;t[r+p]=255&u,p+=y,u/=256,i-=8);for(o=o<<i|u,f+=i;f>0;t[r+p]=255&o,p+=y,o/=256,f-=8);t[r+p-y]|=128*d}},61146:function(t,e,r){"use strict";r.d(e,{E:function(){return s},R:function(){return o},S:function(){return u},a:function(){return f}});var n=r(2257),i=r(60874),a=r(18392),o=function(){return i.z.union([i.z.date().transform((function(t){return n.O$.from(Math.floor(t.getTime()/1e3))})),i.z.number().transform((function(t){return n.O$.from(t)}))])}(),u=function(){return o.default(new Date(0))}(),s=function(){return o.default(new Date(Date.now()+31536e7))}();function f(t,e){if(!t)throw new a.x(e);return t}},27207:function(t,e,r){"use strict";r.d(e,{B:function(){return c},C:function(){return l},N:function(){return h},a:function(){return p},s:function(){return y}});var n=r(74165),i=r(15861),a=r(18392),o=r(60874),u=r(87126),s=function(){return o.z.object({}).catchall(o.z.union([a.cx,o.z.unknown()]))}(),f=function(){return o.z.union([o.z.array(o.z.array(s)).transform((function(t){return t.flat()})),o.z.array(s),s]).optional().nullable()}(),c=function(){return o.z.object({name:o.z.union([o.z.string(),o.z.number()]).optional().nullable(),description:o.z.string().nullable().optional().nullable(),image:a.cy.nullable().optional(),animation_url:a.cy.optional().nullable()})}(),l=function(){return c.extend({external_url:a.cy.nullable().optional(),background_color:a.cz.optional().nullable(),properties:f,attributes:f}).catchall(o.z.union([a.cx,o.z.unknown()]))}(),h=function(){return o.z.union([l,o.z.string()])}(),p=function(){return l.extend({id:o.z.string(),uri:o.z.string(),image:o.z.string().nullable().optional(),external_url:o.z.string().nullable().optional(),animation_url:o.z.string().nullable().optional()})}();function y(t,e,r,n){return d.apply(this,arguments)}function d(){return(d=(0,i.Z)((0,n.Z)().mark((function t(e,i,o,s){var f,c,l,h,p,y;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(0,u.i)(o)){t.next=4;break}s.value=i,t.next=21;break;case 4:return t.next=6,Promise.resolve().then(r.t.bind(r,49242,19));case 6:return f=t.sent.default,c=e.getSigner(),l=e.getProvider(),h=new a.cs(c||l,o,f,e.options,e.storage),t.next=12,e.getSignerAddress();case 12:return p=t.sent,y=e.address,t.next=16,h.read("allowance",[p,y]);case 16:if(!t.sent.lt(i)){t.next=20;break}return t.next=20,h.sendTransaction("approve",[y,i]);case 20:return t.abrupt("return",s);case 21:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},85938:function(t,e,r){"use strict";r.d(e,{A:function(){return J},B:function(){return kt},C:function(){return wt},D:function(){return W},E:function(){return G},F:function(){return D},H:function(){return lt},I:function(){return N},J:function(){return z},K:function(){return vt},L:function(){return xt},M:function(){return Ot},S:function(){return Bt},a:function(){return $},f:function(){return _},n:function(){return Et},r:function(){return Zt},s:function(){return It},t:function(){return Pt},u:function(){return Ut},v:function(){return Lt},w:function(){return Rt},x:function(){return Ct},y:function(){return mt},z:function(){return V}});var n=r(93433),i=r(29439),a=r(37762),o=r(1413),u=r(74165),s=r(15671),f=r(43144),c=r(15861),l=r(75422),h=r(6222),p=r(88062),y=r(84530),d=r(68624),m=r(2257),g=r(49716),v=r(83374),b=r(18392),w=r(87126),x=r(39369),k=r(97326),B=r(60136),E=r(29388),S=r(4942),T=r(5454),A=r(51089),Z=r.n(A),I=r(98842),P=function(){function t(){(0,s.Z)(this,t)}return(0,f.Z)(t,[{key:"print",value:function(){t.print(this)}},{key:"bufferIndexOf",value:function(t,e){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return this.binarySearch(t,e,T.lW.compare);return this.linearSearch(t,e,(function(t,e){return t.equals(e)}))}},{key:"binarySearch",value:function(e,r,n){return t.binarySearch(e,r,n)}},{key:"linearSearch",value:function(e,r,n){return t.linearSearch(e,r,n)}},{key:"bigNumberify",value:function(e){return t.bigNumberify(e)}},{key:"bufferToHex",value:function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.bufferToHex(e,r)}},{key:"bufferify",value:function(e){return t.bufferify(e)}},{key:"bufferifyFn",value:function(t){var e=this;return function(r){var n=t(r);if(T.lW.isBuffer(n))return n;if(e.isHexString(n))return T.lW.from(n.replace("0x",""),"hex");if("string"===typeof n)return T.lW.from(n);if("bigint"===typeof n)return T.lW.from(r.toString(16),"hex");if(ArrayBuffer.isView(n))return T.lW.from(n.buffer,n.byteOffset,n.byteLength);var i=function(t){for(var e=new Uint8Array(t.length/2),r=0;r<t.length;r+=2)e[r/2]=parseInt(t.substring(r,r+2),16);return e.buffer}(r.toString("hex")),a=function(t){var e=new Uint8Array(t);return Array.from(e).map((function(t){return t.toString(16).padStart(2,"0")})).join("")}(t(i));return T.lW.from(a,"hex")}}},{key:"isHexString",value:function(e){return t.isHexString(e)}},{key:"log2",value:function(t){return 1===t?0:1+this.log2(t/2|0)}},{key:"zip",value:function(t,e){return t.map((function(t,r){return[t,e[r]]}))}}],[{key:"binarySearch",value:function(t,e,r){for(var n=0,i=t.length-1;n<=i;){var a=Math.floor((n+i)/2),o=r(t[a],e);if(0===o){for(var u=a-1;u>=0;u--)if(0!==r(t[u],e))return u+1;return 0}o<0?n=a+1:i=a-1}return-1}},{key:"linearSearch",value:function(t,e,r){for(var n=0;n<t.length;n++)if(r(t[n],e))return n;return-1}},{key:"bufferify",value:function(e){if(!T.lW.isBuffer(e)){if("object"===typeof e&&e.words)return T.lW.from(e.toString(U),"hex");if(t.isHexString(e))return T.lW.from(e.replace(/^0x/,""),"hex");if("string"===typeof e)return T.lW.from(e);if("bigint"===typeof e)return T.lW.from(e.toString(16),"hex");if(e instanceof Uint8Array)return T.lW.from(e.buffer);if("number"===typeof e){var r=e.toString();return r.length%2&&(r="0".concat(r)),T.lW.from(r,"hex")}if(ArrayBuffer.isView(e))return T.lW.from(e.buffer,e.byteOffset,e.byteLength)}return e}},{key:"bigNumberify",value:function(e){if("bigint"===typeof e)return e;if("string"===typeof e)return e.startsWith("0x")&&t.isHexString(e)?BigInt("0x"+e.replace("0x","").toString()):BigInt(e);if(T.lW.isBuffer(e))return BigInt("0x"+e.toString("hex"));if(e instanceof Uint8Array)return function(t){var e=Array.from(t).map((function(t){return t.toString(16).padStart(2,"0")})).join("");return BigInt("0x".concat(e))}(e);if("number"===typeof e)return BigInt(e);throw new Error("cannot bigNumberify")}},{key:"isHexString",value:function(t){return"string"===typeof t&&/^(0x)?[0-9A-Fa-f]*$/.test(t)}},{key:"print",value:function(t){console.log(t.toString())}},{key:"bufferToHex",value:function(t){return"".concat(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?"0x":"").concat((t||T.lW.alloc(0)).toString("hex"))}},{key:"hexZeroPad",value:function(t,e){return"0x"+t.replace("0x","").padStart(e,"0")}}]),t}();function U(t){for(var e=t.words,r=new ArrayBuffer(4*e.length),n=new Uint8Array(r),i=0;i<e.length;i++)n[4*i]=e[i]>>24&255,n[4*i+1]=e[i]>>16&255,n[4*i+2]=e[i]>>8&255,n[4*i+3]=255&e[i];return r}var O=function(t){(0,B.Z)(r,t);var e=(0,E.Z)(r);function r(t,n){var i;(0,s.Z)(this,r);var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(i=e.call(this),(0,S.Z)((0,k.Z)(i),"duplicateOdd",!1),(0,S.Z)((0,k.Z)(i),"concatenator",T.lW.concat),(0,S.Z)((0,k.Z)(i),"hashLeaves",!1),(0,S.Z)((0,k.Z)(i),"isBitcoinTree",!1),(0,S.Z)((0,k.Z)(i),"leaves",[]),(0,S.Z)((0,k.Z)(i),"layers",[]),(0,S.Z)((0,k.Z)(i),"sortLeaves",!1),(0,S.Z)((0,k.Z)(i),"sortPairs",!1),(0,S.Z)((0,k.Z)(i),"sort",!1),(0,S.Z)((0,k.Z)(i),"fillDefaultHash",null),(0,S.Z)((0,k.Z)(i),"complete",!1),a.complete){if(a.isBitcoinTree)throw new Error('option "complete" is incompatible with "isBitcoinTree"');if(a.duplicateOdd)throw new Error('option "complete" is incompatible with "duplicateOdd"')}if(i.isBitcoinTree=!!a.isBitcoinTree,i.hashLeaves=!!a.hashLeaves,i.sortLeaves=!!a.sortLeaves,i.sortPairs=!!a.sortPairs,i.complete=!!a.complete,a.fillDefaultHash)if("function"===typeof a.fillDefaultHash)i.fillDefaultHash=a.fillDefaultHash;else{if(!T.lW.isBuffer(a.fillDefaultHash)&&"string"!==typeof a.fillDefaultHash)throw new Error('method "fillDefaultHash" must be a function, Buffer, or string');i.fillDefaultHash=function(t,e){return a.fillDefaultHash}}return i.sort=!!a.sort,i.sort&&(i.sortLeaves=!0,i.sortPairs=!0),i.duplicateOdd=!!a.duplicateOdd,a.concatenator&&(i.concatenator=a.concatenator),i.hashFn=i.bufferifyFn(n),i.processLeaves(t),i}return(0,f.Z)(r,[{key:"getOptions",value:function(){var t,e;return{complete:this.complete,isBitcoinTree:this.isBitcoinTree,hashLeaves:this.hashLeaves,sortLeaves:this.sortLeaves,sortPairs:this.sortPairs,sort:this.sort,fillDefaultHash:null!==(t=null===(e=this.fillDefaultHash)||void 0===e?void 0:e.toString())&&void 0!==t?t:null,duplicateOdd:this.duplicateOdd}}},{key:"processLeaves",value:function(t){if(this.hashLeaves&&(t=t.map(this.hashFn)),this.leaves=t.map(this.bufferify),this.sortLeaves&&(this.leaves=this.leaves.sort(T.lW.compare)),this.fillDefaultHash)for(var e=this.leaves.length;e<Math.pow(2,Math.ceil(Math.log2(this.leaves.length)));e++)this.leaves.push(this.bufferify(this.fillDefaultHash(e,this.hashFn)));this.createHashes(this.leaves)}},{key:"createHashes",value:function(t){for(this.layers=[t];t.length>1;){var e=this.layers.length;this.layers.push([]);for(var r=this.complete&&1===e&&!Number.isInteger(Math.log2(t.length))?2*t.length-Math.pow(2,Math.ceil(Math.log2(t.length))):t.length,i=0;i<t.length;i+=2){if(i>=r){var a;(a=this.layers[e]).push.apply(a,(0,n.Z)(t.slice(r)));break}if(i+1===t.length&&t.length%2===1){var o=t[t.length-1],u=o;if(this.isBitcoinTree){u=this.hashFn(this.concatenator([Z()(o),Z()(o)])),u=Z()(this.hashFn(u)),this.layers[e].push(u);continue}if(!this.duplicateOdd){this.layers[e].push(t[i]);continue}}var s=t[i],f=i+1===t.length?s:t[i+1],c=null;c=this.isBitcoinTree?[Z()(s),Z()(f)]:[s,f],this.sortPairs&&c.sort(T.lW.compare);var l=this.hashFn(this.concatenator(c));this.isBitcoinTree&&(l=Z()(this.hashFn(l))),this.layers[e].push(l)}t=this.layers[e]}}},{key:"addLeaf",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(t=this.hashFn(t)),this.processLeaves(this.leaves.concat(t))}},{key:"addLeaves",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(t=t.map(this.hashFn)),this.processLeaves(this.leaves.concat(t))}},{key:"getLeaves",value:function(t){var e=this;return Array.isArray(t)?(this.hashLeaves&&(t=t.map(this.hashFn),this.sortLeaves&&(t=t.sort(T.lW.compare))),this.leaves.filter((function(r){return-1!==e.bufferIndexOf(t,r,e.sortLeaves)}))):this.leaves}},{key:"getLeaf",value:function(t){return t<0||t>this.leaves.length-1?T.lW.from([]):this.leaves[t]}},{key:"getLeafIndex",value:function(t){t=this.bufferify(t);for(var e=this.getLeaves(),r=0;r<e.length;r++){if(e[r].equals(t))return r}return-1}},{key:"getLeafCount",value:function(){return this.leaves.length}},{key:"getHexLeaves",value:function(){var t=this;return this.leaves.map((function(e){return t.bufferToHex(e)}))}},{key:"getLayers",value:function(){return this.layers}},{key:"getHexLayers",value:function(){var t=this;return this.layers.reduce((function(e,r){return Array.isArray(r)?e.push(r.map((function(e){return t.bufferToHex(e)}))):e.push(r),e}),[])}},{key:"getLayersFlat",value:function(){var t=this.layers.reduce((function(t,e){return Array.isArray(e)?t.unshift.apply(t,(0,n.Z)(e)):t.unshift(e),t}),[]);return t.unshift(T.lW.from([0])),t}},{key:"getHexLayersFlat",value:function(){var t=this;return this.getLayersFlat().map((function(e){return t.bufferToHex(e)}))}},{key:"getLayerCount",value:function(){return this.getLayers().length}},{key:"getRoot",value:function(){return 0===this.layers.length?T.lW.from([]):this.layers[this.layers.length-1][0]||T.lW.from([])}},{key:"getHexRoot",value:function(){return this.bufferToHex(this.getRoot())}},{key:"getProof",value:function(t,e){if("undefined"===typeof t)throw new Error("leaf is required");t=this.bufferify(t);var r=[];if(!Number.isInteger(e)){e=-1;for(var n=0;n<this.leaves.length;n++)0===T.lW.compare(t,this.leaves[n])&&(e=n)}if(e<=-1)return[];for(var i=0;i<this.layers.length;i++){var a=this.layers[i],o=e%2,u=o?e-1:this.isBitcoinTree&&e===a.length-1&&i<this.layers.length-1?e:e+1;u<a.length&&r.push({position:o?"left":"right",data:a[u]}),e=e/2|0}return r}},{key:"getHexProof",value:function(t,e){var r=this;return this.getProof(t,e).map((function(t){return r.bufferToHex(t.data)}))}},{key:"getProofs",value:function(){var t=[];return this.getProofsDFS(this.layers.length-1,0,[],t),t}},{key:"getProofsDFS",value:function(t,e,r,i){var a=e%2;if(-1!==t){if(!(e>=this.layers[t].length)){var o=this.layers[t],u=a?e-1:e+1,s=!1;u<o.length&&(s=!0,r.push({position:a?"left":"right",data:o[u]}));var f=2*e,c=2*e+1;this.getProofsDFS(t-1,f,r,i),this.getProofsDFS(t-1,c,r,i),s&&r.splice(r.length-1,1)}}else a||i.push((0,n.Z)(r).reverse())}},{key:"getHexProofs",value:function(){var t=this;return this.getProofs().map((function(e){return t.bufferToHex(e.data)}))}},{key:"getPositionalHexProof",value:function(t,e){var r=this;return this.getProof(t,e).map((function(t){return["left"===t.position?0:1,r.bufferToHex(t.data)]}))}},{key:"getProofIndices",value:function(t,e){var r,n=Math.pow(2,e),i=new Set,o=(0,a.Z)(t);try{for(o.s();!(r=o.n()).done;)for(var u=r.value,s=n+u;s>1;)i.add(1^s),s=s/2|0}catch(m){o.e(m)}finally{o.f()}var f=t.map((function(t){return n+t})),c=Array.from(i).sort((function(t,e){return t-e})).reverse();i=f.concat(c);var l,h=new Set,p=[],y=(0,a.Z)(i);try{for(y.s();!(l=y.n()).done;){var d=l.value;if(!h.has(d))for(p.push(d);d>1&&(h.add(d),h.has(1^d));)d=d/2|0}}catch(m){y.e(m)}finally{y.f()}return p.filter((function(e){return!t.includes(e-n)}))}},{key:"getProofIndicesForUnevenTree",value:function(t,e){for(var r=Math.ceil(Math.log2(e)),i=[],a=0;a<r;a++){e%2!==0&&i.push({index:a,leavesCount:e}),e=Math.ceil(e/2)}for(var o=[],u=t,s=function(t){var e=u.map((function(t){return t%2===0?t+1:t-1})),r=e.filter((function(t){return!u.includes(t)})),a=i.find((function(e){return e.index===t}));a&&u.includes(a.leavesCount-1)&&(r=r.slice(0,-1)),o.push(r),u=(0,n.Z)(new Set(u.map((function(t){return t%2===0?t/2:t%2===0?(t+1)/2:(t-1)/2}))))},f=0;f<r;f++)s(f);return o}},{key:"getMultiProof",value:function(t,e){var r=this;if(this.complete||console.warn("Warning: For correct multiProofs it's strongly recommended to set complete: true"),e||(e=t,t=this.getLayersFlat()),this.isUnevenTree()&&e.every(Number.isInteger))return this.getMultiProofForUnevenTree(e);if(!e.every(Number.isInteger)){var n=e;this.sortPairs&&(n=n.sort(T.lW.compare));var i=n.map((function(t){return r.bufferIndexOf(r.leaves,t,r.sortLeaves)})).sort((function(t,e){return t===e?0:t>e?1:-1}));if(!i.every((function(t){return-1!==t})))throw new Error("Element does not exist in Merkle tree");for(var a=[],o=[],u=[],s=0;s<this.layers.length;s++){for(var f=this.layers[s],c=0;c<i.length;c++){var l=i[c],h=this.getPairNode(f,l);a.push(f[l]),h&&o.push(h),u.push(l/2|0)}i=u.filter((function(t,e,r){return r.indexOf(t)===e})),u=[]}return o.filter((function(t){return!a.includes(t)}))}return this.getProofIndices(e,Math.log2(t.length/2|0)).map((function(e){return t[e]}))}},{key:"getMultiProofForUnevenTree",value:function(t,e){e||(e=t,t=this.getLayers());var r,n=[],i=e,o=(0,a.Z)(t);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,f=[],c=(0,a.Z)(i);try{for(c.s();!(u=c.n()).done;){var l=u.value;if(l%2===0){var h=l+1;if(!i.includes(h)&&s[h]){f.push(s[h]);continue}}var p=l-1;i.includes(p)||!s[p]||f.push(s[p])}}catch(v){c.e(v)}finally{c.f()}n=n.concat(f);var y,d=new Set,m=(0,a.Z)(i);try{for(m.s();!(y=m.n()).done;){var g=y.value;g%2!==0?g%2!==0?d.add((g-1)/2):d.add((g+1)/2):d.add(g/2)}}catch(v){m.e(v)}finally{m.f()}i=Array.from(d)}}catch(v){o.e(v)}finally{o.f()}return n}},{key:"getHexMultiProof",value:function(t,e){var r=this;return this.getMultiProof(t,e).map((function(t){return r.bufferToHex(t)}))}},{key:"getProofFlags",value:function(t,e){var r,i=this;if(!Array.isArray(t)||t.length<=0)throw new Error("Invalid Inputs!");if(!(r=t.every(Number.isInteger)?(0,n.Z)(t).sort((function(t,e){return t===e?0:t>e?1:-1})):t.map((function(t){return i.bufferIndexOf(i.leaves,t,i.sortLeaves)})).sort((function(t,e){return t===e?0:t>e?1:-1}))).every((function(t){return-1!==t})))throw new Error("Element does not exist in Merkle tree");for(var a=e.map((function(t){return i.bufferify(t)})),o=[],u=[],s=function(){var t=i.layers[f];r=r.reduce((function(e,r){if(!o.includes(t[r])){var n=i.getPairNode(t,r),s=a.includes(t[r])||a.includes(n);n&&u.push(!s),o.push(t[r]),o.push(n)}return e.push(r/2|0),e}),[])},f=0;f<this.layers.length;f++)s();return u}},{key:"verify",value:function(t,e,r){var n=this.bufferify(e);if(r=this.bufferify(r),!Array.isArray(t)||!e||!r)return!1;for(var i=0;i<t.length;i++){var a=t[i],o=null,u=null;if("string"===typeof a)o=this.bufferify(a),u=!0;else if(Array.isArray(a))u=0===a[0],o=this.bufferify(a[1]);else if(T.lW.isBuffer(a))o=a,u=!0;else{if(!(a instanceof Object))throw new Error("Expected node to be of type string or object");o=this.bufferify(a.data),u="left"===a.position}var s=[];this.isBitcoinTree?(s.push(Z()(n)),s[u?"unshift":"push"](Z()(o)),n=this.hashFn(this.concatenator(s)),n=Z()(this.hashFn(n))):this.sortPairs?-1===T.lW.compare(n,o)?(s.push(n,o),n=this.hashFn(this.concatenator(s))):(s.push(o,n),n=this.hashFn(this.concatenator(s))):(s.push(n),s[u?"unshift":"push"](o),n=this.hashFn(this.concatenator(s)))}return 0===T.lW.compare(n,r)}},{key:"verifyMultiProof",value:function(t,e,r,n,o){var u=this;if(this.isUnevenTree())return this.verifyMultiProofForUnevenTree(t,e,r,n,o);var s=Math.ceil(Math.log2(n));t=this.bufferify(t),r=r.map((function(t){return u.bufferify(t)})),o=o.map((function(t){return u.bufferify(t)}));var f,c={},l=(0,a.Z)(this.zip(e,r));try{for(l.s();!(f=l.n()).done;){var h=(0,i.Z)(f.value,2),p=h[0],y=h[1];c[Math.pow(2,s)+p]=y}}catch(S){l.e(S)}finally{l.f()}var d,m=(0,a.Z)(this.zip(this.getProofIndices(e,s),o));try{for(m.s();!(d=m.n()).done;){var g=(0,i.Z)(d.value,2),v=g[0],b=g[1];c[v]=b}}catch(S){m.e(S)}finally{m.f()}var w=Object.keys(c).map((function(t){return Number(t)})).sort((function(t,e){return t-e}));w=w.slice(0,w.length-1);for(var x=0;x<w.length;){var k=w[x];if(k>=2&&{}.hasOwnProperty.call(c,1^k)){var B=[c[k-k%2],c[k-k%2+1]];this.sortPairs&&(B=B.sort(T.lW.compare));var E=B[1]?this.hashFn(this.concatenator(B)):B[0];c[k/2|0]=E,w.push(k/2|0)}x+=1}return!e.length||{}.hasOwnProperty.call(c,1)&&c[1].equals(t)}},{key:"verifyMultiProofWithFlags",value:function(t,e,r,n){t=this.bufferify(t),e=e.map(this.bufferify),r=r.map(this.bufferify);for(var i=e.length,a=n.length,o=[],u=0,s=0,f=0,c=0;c<a;c++){var l=[n[c]?u<i?e[u++]:o[s++]:r[f++],u<i?e[u++]:o[s++]].sort(T.lW.compare);o[c]=this.hashFn(this.concatenator(l))}return 0===T.lW.compare(o[a-1],t)}},{key:"verifyMultiProofForUnevenTree",value:function(t,e,r,n,i){var a=this;t=this.bufferify(t),r=r.map((function(t){return a.bufferify(t)})),i=i.map((function(t){return a.bufferify(t)}));var o=this.calculateRootForUnevenTree(e,r,n,i);return t.equals(o)}},{key:"getDepth",value:function(){return this.getLayers().length-1}},{key:"getLayersAsObject",value:function(){for(var t=this,e=this.getLayers().map((function(e){return e.map((function(e){return t.bufferToHex(e,!1)}))})),r=[],n=0;n<e.length;n++){for(var i=[],a=0;a<e[n].length;a++){var o=(0,S.Z)({},e[n][a],null);if(r.length){o[e[n][a]]={};var u=r.shift(),s=Object.keys(u)[0];if(o[e[n][a]][s]=u[s],r.length){var f=r.shift(),c=Object.keys(f)[0];o[e[n][a]][c]=f[c]}}i.push(o)}r.push.apply(r,i)}return r[0]}},{key:"resetTree",value:function(){this.leaves=[],this.layers=[]}},{key:"getPairNode",value:function(t,e){var r=e%2===0?e+1:e-1;return r<t.length?t[r]:null}},{key:"toTreeString",value:function(){var t=this.getLayersAsObject();return(0,I.asTree)(t,!0,!1)}},{key:"toString",value:function(){return this.toTreeString()}},{key:"isUnevenTree",value:function(t){var e=(null===t||void 0===t?void 0:t.length)||this.getDepth();return!this.isPowOf2(e)}},{key:"isPowOf2",value:function(t){return t&&!(t&t-1)}},{key:"calculateRootForUnevenTree",value:function(t,e,r,a){for(var o=this.zip(t,e).sort((function(t,e){return(0,i.Z)(t,1)[0]-(0,i.Z)(e,1)[0]})),u=o.map((function(t){return(0,i.Z)(t,1)[0]})),s=this.getProofIndicesForUnevenTree(u,r),f=0,c=[],l=0;l<s.length;l++){var h=s[l],p=f;f+=h.length,c[l]=this.zip(h,a.slice(p,f))}for(var y=[o],d=0;d<c.length;d++){for(var m=c[d].concat(y[d]).sort((function(t,e){return(0,i.Z)(t,1)[0]-(0,i.Z)(e,1)[0]})).map((function(t){return(0,i.Z)(t,2)[1]})),g=y[d].map((function(t){return(0,i.Z)(t,1)[0]})),v=(0,n.Z)(new Set(g.map((function(t){return t%2===0?t/2:t%2===0?(t+1)/2:(t-1)/2})))),b=[],w=0;w<v.length;w++){var x=v[w],k=m[2*w],B=m[2*w+1],E=B?this.hashFn(this.concatenator([k,B])):k;b.push([x,E])}y.push(b)}return y[y.length-1][0][1]}}],[{key:"marshalLeaves",value:function(t){return JSON.stringify(t.map((function(t){return r.bufferToHex(t)})),null,2)}},{key:"unmarshalLeaves",value:function(t){var e=null;if("string"===typeof t)e=JSON.parse(t);else{if(!(t instanceof Object))throw new Error("Expected type of string or object");e=t}if(!e)return[];if(!Array.isArray(e))throw new Error("Expected JSON string to be array");return e.map(r.bufferify)}}]),r}(P),L=r(61146),R=r(60874),C=r(27207),M=r(54261);function N(t){return{startTimestamp:t.startTimestamp,maxClaimableSupply:t.maxClaimableSupply,supplyClaimed:t.supplyClaimed,merkleRoot:t.merkleRoot,pricePerToken:t.pricePerToken,currency:t.currency,quantityLimitPerTransaction:t.maxClaimablePerWallet,waitTimeInSecondsBetweenClaims:t.waitTimeInSecondsBetweenClaims||0}}function z(t){return{startTimestamp:t.startTimestamp,maxClaimableSupply:t.maxClaimableSupply,supplyClaimed:t.supplyClaimed,merkleRoot:t.merkleRoot,pricePerToken:t.pricePerToken,currency:t.currency,quantityLimitPerWallet:t.maxClaimablePerWallet,metadata:t.metadata||""}}function W(t,e){return"unlimited"===t?l.Bz:h.parseUnits(t,e)}function F(t){return H.apply(this,arguments)}function H(){return(H=(0,c.Z)((0,u.Z)().mark((function t(e){var r,i,o,s,f,c,l;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=25e3,i=Array.from({length:Math.ceil(e.length/r)},(function(t,n){return e.slice(n*r,n*r+r)})),o=[],t.next=5,Promise.all(i.map((function(t){return b.bM.parseAsync(t)})));case 5:s=t.sent,f=(0,a.Z)(s);try{for(f.s();!(c=f.n()).done;)l=c.value,o.push.apply(o,(0,n.Z)(l))}catch(u){f.e(u)}finally{f.f()}return t.abrupt("return",o);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var D=function(t){return t[t.V1=1]="V1",t[t.V2=2]="V2",t}({}),j=function(){function t(e,r,n,i,a){(0,s.Z)(this,t),this.storage=e,this.shardNybbles=i,this.baseUri=r,this.originalEntriesUri=n,this.tokenDecimals=a,this.shards={},this.trees={}}return(0,f.Z)(t,[{key:"getProof",value:function(){var e=(0,c.Z)((0,u.Z)().mark((function e(r,n,i){var a,s,f,l,h,y,d,m,g,v=this;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.slice(2,2+this.shardNybbles).toLowerCase(),s=this.shards[a],f={},void 0!==s){e.next=18;break}return e.prev=4,l=this.baseUri.endsWith("/")?this.baseUri:"".concat(this.baseUri,"/"),e.next=8,this.storage.downloadJSON("".concat(l).concat(a,".json"));case 8:return s=this.shards[a]=e.sent,e.next=11,Promise.all(s.entries.map(function(){var e=(0,c.Z)((0,u.Z)().mark((function e(r){var a;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchAndCacheDecimals(f,n,r.currencyAddress);case 2:return a=e.sent,e.abrupt("return",t.hashEntry(r,v.tokenDecimals,a,i));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:h=e.sent,this.trees[a]=new O(h,p.keccak256,{sort:!0}),e.next=18;break;case 15:return e.prev=15,e.t0=e.catch(4),e.abrupt("return",null);case 18:if(y=s.entries.find((function(t){return t.address.toLowerCase()===r.toLowerCase()}))){e.next=21;break}return e.abrupt("return",null);case 21:return e.next=23,t.fetchAndCacheDecimals(f,n,y.currencyAddress);case 23:return d=e.sent,m=t.hashEntry(y,this.tokenDecimals,d,i),g=this.trees[a].getProof(m).map((function(t){return"0x"+t.data.toString("hex")})),e.abrupt("return",b.bN.parseAsync((0,o.Z)((0,o.Z)({},y),{},{proof:g.concat(s.proofs)})));case 27:case"end":return e.stop()}}),e,this,[[4,15]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getAllEntries",value:function(){var t=(0,c.Z)((0,u.Z)().mark((function t(){return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.storage.downloadJSON(this.originalEntriesUri);case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),console.warn("Could not fetch original snapshot entries",t.t0),t.abrupt("return",[]);case 10:case"end":return t.stop()}}),t,this,[[0,6]])})));return function(){return t.apply(this,arguments)}}()}],[{key:"fromUri",value:function(){var e=(0,c.Z)((0,u.Z)().mark((function e(r,n){var i;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.downloadJSON(r);case 3:if(!(i=e.sent).isShardedMerkleTree){e.next=6;break}return e.abrupt("return",t.fromShardedMerkleTreeInfo(i,n));case 6:e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",void 0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"fromShardedMerkleTreeInfo",value:function(){var e=(0,c.Z)((0,u.Z)().mark((function e(r,n){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new t(n,r.baseUri,r.originalEntriesUri,r.shardNybbles,r.tokenDecimals));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"hashEntry",value:function(t,e,r,n){switch(n){case D.V1:return y.keccak256(["address","uint256"],[t.address,W(t.maxClaimable,e)]);case D.V2:return y.keccak256(["address","uint256","uint256","address"],[t.address,W(t.maxClaimable,e),W(t.price||"unlimited",r),t.currencyAddress||d.d])}}},{key:"fetchAndCacheDecimals",value:function(){var t=(0,c.Z)((0,u.Z)().mark((function t(e,r,n){var i,a;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return",18);case 2:if(void 0!==(i=e[n])){t.next=9;break}return t.next=6,(0,w.f)(r,n);case 6:a=t.sent,i=a.decimals,e[n]=i;case 9:return t.abrupt("return",i);case 10:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}()},{key:"buildAndUpload",value:function(){var e=(0,c.Z)((0,u.Z)().mark((function e(r,n,o,s,f){var l,h,y,d,m,g,v,b,w,x,k,B,E,S,T,A,Z,I,P,U,L,R,C,M=arguments;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=M.length>5&&void 0!==M[5]?M[5]:2,e.next=3,F(r);case 3:h=e.sent,y={},d=(0,a.Z)(h);try{for(d.s();!(m=d.n()).done;)g=m.value,v=g.address.slice(2,2+l).toLowerCase(),void 0===y[v]&&(y[v]=[]),y[v].push(g)}catch(N){d.e(N)}finally{d.f()}return b={},e.next=10,Promise.all(Object.entries(y).map(function(){var e=(0,c.Z)((0,u.Z)().mark((function e(r){var a,s,l;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,i.Z)(r,2),s=a[0],l=a[1],e.t0=s,e.t1=O,e.next=5,Promise.all(l.map(function(){var e=(0,c.Z)((0,u.Z)().mark((function e(r){var i;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchAndCacheDecimals(b,o,r.currencyAddress);case 2:return i=e.sent,e.abrupt("return",t.hashEntry(r,n,i,f));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:return e.t2=e.sent,e.t3=p.keccak256,e.t4={sort:!0},e.t5=new e.t1(e.t2,e.t3,e.t4).getHexRoot(),e.abrupt("return",[e.t0,e.t5]);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 10:for(w=e.sent,x=Object.fromEntries(w),k=new O(Object.values(x),p.keccak256,{sort:!0}),B=[],E=0,S=Object.entries(y);E<S.length;E++)T=(0,i.Z)(S[E],2),A=T[0],Z=T[1],I={proofs:k.getProof(x[A]).map((function(t){return"0x"+t.data.toString("hex")})),entries:Z},B.push({data:JSON.stringify(I),name:"".concat(A,".json")});return e.next=17,s.uploadBatch(B);case 17:return P=e.sent,U=P[0].slice(0,P[0].lastIndexOf("/")),e.next=21,s.upload(h);case 21:return L=e.sent,R={merkleRoot:k.getHexRoot(),baseUri:U,originalEntriesUri:L,shardNybbles:l,tokenDecimals:n,isShardedMerkleTree:!0},e.next=25,s.upload(R);case 25:return C=e.sent,e.abrupt("return",{shardedMerkleInfo:R,uri:C});case 27:case"end":return e.stop()}}),e)})));return function(t,r,n,i,a){return e.apply(this,arguments)}}()}]),t}();function _(t,e,r,n,i,a){return q.apply(this,arguments)}function q(){return(q=(0,c.Z)((0,u.Z)().mark((function t(e,r,n,i,a,o){var s,f,c,l;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return",null);case 2:if(!(s=n[r])){t.next=19;break}return t.next=6,a.downloadJSON(s);case 6:if(!(f=t.sent).isShardedMerkleTree||f.merkleRoot!==r){t.next=14;break}return t.next=10,j.fromShardedMerkleTreeInfo(f,a);case 10:return c=t.sent,t.next=13,c.getProof(e,i,o);case 13:return t.abrupt("return",t.sent);case 14:return t.next=16,b.bO.parseAsync(f);case 16:if(l=t.sent,r!==l.merkleRoot){t.next=19;break}return t.abrupt("return",l.claims.find((function(t){return t.address.toLowerCase()===e.toLowerCase()}))||null);case 19:return t.abrupt("return",null);case 20:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function V(t){return{startTimestamp:t.startTimestamp,maxClaimableSupply:t.maxClaimableSupply,supplyClaimed:t.supplyClaimed,merkleRoot:t.merkleRoot.toString(),pricePerToken:t.pricePerToken,currency:t.currency,maxClaimablePerWallet:t.quantityLimitPerTransaction,waitTimeInSecondsBetweenClaims:t.waitTimeInSecondsBetweenClaims}}function J(t){return{startTimestamp:t.startTimestamp,maxClaimableSupply:t.maxClaimableSupply,supplyClaimed:t.supplyClaimed,merkleRoot:t.merkleRoot.toString(),pricePerToken:t.pricePerToken,currency:t.currency,maxClaimablePerWallet:t.quantityLimitPerWallet,waitTimeInSecondsBetweenClaims:0,metadata:t.metadata}}function $(t,e,r,n,i){return Y.apply(this,arguments)}function Y(){return(Y=(0,c.Z)((0,u.Z)().mark((function t(e,n,i,a,o){var s,f,c,l,p,y,d,g;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.getSigner(),f=e.getProvider(),t.next=4,Promise.resolve().then(r.t.bind(r,49242,19));case 4:return c=t.sent.default,l=new b.cs(s||f,n,c,e.options,e.storage),t.next=8,e.getSignerAddress();case 8:return p=t.sent,y=e.address,t.next=12,l.read("allowance",[p,y]);case 12:if(d=t.sent,g=m.O$.from(i).mul(m.O$.from(a)).div(h.parseUnits("1",o)),!d.lt(g)){t.next=17;break}return t.next=17,l.sendTransaction("approve",[y,d.add(g)]);case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function G(t,e,r,n,i,a,o,u,s){return K.apply(this,arguments)}function K(){return(K=(0,c.Z)((0,u.Z)().mark((function t(e,r,n,i,a,o,s,f,c){var p,y,v,b,k,B,E,S;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(p=W(n.maxClaimablePerWallet,a),y=[g.hexZeroPad([0],32)],v=n.price,b=n.currencyAddress,t.prev=4,n.merkleRootHash.toString().startsWith(d.d)){t.next=34;break}return t.t0=_,t.t1=e,t.t2=n.merkleRootHash.toString(),t.next=11,i();case 11:return t.t3=t.sent,t.t4=o.getProvider(),t.t5=s,t.t6=c,t.next=17,(0,t.t0)(t.t1,t.t2,t.t3,t.t4,t.t5,t.t6);case 17:if(!(k=t.sent)){t.next=32;break}if(y=k.proof,p="unlimited"===k.maxClaimable?l.Bz:h.parseUnits(k.maxClaimable,a),void 0!==k.price&&"unlimited"!==k.price){t.next=25;break}t.t7=l.Bz,t.next=28;break;case 25:return t.next=27,(0,x.n)(o.getProvider(),k.price,k.currencyAddress||d.d);case 27:t.t7=t.sent;case 28:v=t.t7,b=k.currencyAddress||d.d,t.next=34;break;case 32:if(c!==D.V1){t.next=34;break}throw new Error("No claim found for this address");case 34:t.next=41;break;case 36:if(t.prev=36,t.t8=t.catch(4),"No claim found for this address"!==(null===t.t8||void 0===t.t8?void 0:t.t8.message)){t.next=40;break}throw t.t8;case 40:console.warn("failed to check claim condition merkle root hash, continuing anyways",t.t8);case 41:return t.next=43,o.getCallOverrides();case 43:if(t.t9=t.sent,t.t9){t.next=46;break}t.t9={};case 46:if(B=t.t9,E=v.toString()!==l.Bz.toString()?v:n.price,S=b!==d.d?b:n.currencyAddress,!E.gt(0)){t.next=57;break}if(!(0,w.i)(S)){t.next=54;break}B.value=m.O$.from(E).mul(r).div(h.parseUnits("1",a)),t.next=57;break;case 54:if(!f){t.next=57;break}return t.next=57,$(o,S,E,r,a);case 57:return t.abrupt("return",{overrides:B,proofs:y,maxClaimable:p,price:E,currencyAddress:S,priceInProof:v,currencyAddressInProof:b});case 58:case"end":return t.stop()}}),t,null,[[4,36]])})))).apply(this,arguments)}var Q=function(){return R.z.object({name:R.z.string(),symbol:R.z.string(),decimals:R.z.number()})}(),X=function(){return Q.extend({value:b.b6,displayValue:R.z.string()})}(),tt=function(){return R.z.object({name:R.z.string().optional()}).catchall(R.z.unknown())}(),et=function(){return R.z.object({startTime:L.S,currencyAddress:R.z.string().default(b.aW),price:b.cw.default(0),maxClaimableSupply:b.cA,maxClaimablePerWallet:b.cA,waitInSeconds:b.b7.default(0),merkleRootHash:b.cB.default(g.hexZeroPad([0],32)),snapshot:R.z.optional(b.bM).nullable(),metadata:tt.optional()})}(),rt=function(){return R.z.array(et)}(),nt=function(){return et.extend({availableSupply:b.cA,currentMintSupply:b.cA,currencyMetadata:X.default({value:m.O$.from("0"),displayValue:"0",symbol:"",decimals:18,name:""}),price:b.b6,waitInSeconds:b.b6,startTime:b.b6.transform((function(t){return new Date(1e3*t.toNumber())})),snapshot:b.bM.optional().nullable()})}();function it(t,e,r,n,i){return at.apply(this,arguments)}function at(){return at=(0,c.Z)((0,u.Z)().mark((function t(e,r,n,i,a){var o,s,f;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F(e);case 2:if(o=t.sent,s=o.map((function(t){return t.address})),!(new Set(s).size<s.length)){t.next=7;break}throw new b.s;case 7:return t.next=9,j.buildAndUpload(o,r,n,i,a);case 9:return f=t.sent,t.abrupt("return",{merkleRoot:f.shardedMerkleInfo.merkleRoot,snapshotUri:f.uri});case 11:case"end":return t.stop()}}),t)}))),at.apply(this,arguments)}function ot(t,e){var r=m.O$.from(t),n=m.O$.from(e);return r.eq(n)?0:r.gt(n)?1:-1}function ut(t,e,r,n,i){return st.apply(this,arguments)}function st(){return st=(0,c.Z)((0,u.Z)().mark((function t(e,r,n,i,a){var o,s;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=[],t.next=3,Promise.all(e.map(function(){var t=(0,c.Z)((0,u.Z)().mark((function t(e){var s;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.snapshot&&e.snapshot.length>0)){t.next=8;break}return t.next=3,it(e.snapshot,r,n,i,a);case 3:s=t.sent,o.push(s),e.merkleRootHash=s.merkleRoot,t.next=9;break;case 8:e.merkleRootHash=g.hexZeroPad([0],32);case 9:return t.abrupt("return",e);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 3:return s=t.sent,t.abrupt("return",{inputsWithSnapshots:s,snapshotInfos:o});case 5:case"end":return t.stop()}}),t)}))),st.apply(this,arguments)}function ft(t,e,r,n){return ct.apply(this,arguments)}function ct(){return(ct=(0,c.Z)((0,u.Z)().mark((function t(e,r,n,i){var a,o,s,f;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.currencyAddress===d.d?b.aW:e.currencyAddress,o=W(e.maxClaimableSupply,r),s=W(e.maxClaimablePerWallet,r),!e.metadata){t.next=11;break}if("string"!==typeof e.metadata){t.next=8;break}f=e.metadata,t.next=11;break;case 8:return t.next=10,i.upload(e.metadata);case 10:f=t.sent;case 11:return t.t0=e.startTime,t.t1=o,t.t2=s,t.next=16,(0,x.n)(n,e.price,a);case 16:return t.t3=t.sent,t.t4=a,t.t5=e.merkleRootHash.toString(),t.t6=e.waitInSeconds||0,t.t7=f,t.abrupt("return",{startTimestamp:t.t0,maxClaimableSupply:t.t1,supplyClaimed:0,maxClaimablePerWallet:t.t2,pricePerToken:t.t3,currency:t.t4,merkleRoot:t.t5,waitTimeInSecondsBetweenClaims:t.t6,metadata:t.t7});case 22:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function lt(t,e,r,n,i){return ht.apply(this,arguments)}function ht(){return(ht=(0,c.Z)((0,u.Z)().mark((function t(e,r,n,i,a){var o,s,f,c,l;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ut(e,r,n,i,a);case 2:return o=t.sent,s=o.inputsWithSnapshots,f=o.snapshotInfos,t.next=7,rt.parseAsync(s);case 7:return c=t.sent,t.next=10,Promise.all(c.map((function(t){return ft(t,r,n,i)})));case 10:return l=t.sent.sort((function(t,e){return ot(t.startTimestamp,e.startTimestamp)})),t.abrupt("return",{snapshotInfos:f,sortedConditions:l});case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function pt(t,e,r){return yt.apply(this,arguments)}function yt(){return(yt=(0,c.Z)((0,u.Z)().mark((function t(e,r,n){var i,a,o,s;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return",null);case 2:if(!(i=r[e])){t.next=19;break}return t.next=6,n.downloadJSON(i);case 6:if(!(a=t.sent).isShardedMerkleTree||a.merkleRoot!==e){t.next=14;break}return t.next=10,j.fromUri(i,n);case 10:return o=t.sent,t.abrupt("return",(null===o||void 0===o?void 0:o.getAllEntries())||null);case 14:return t.next=16,b.bO.parseAsync(a);case 16:if(s=t.sent,e!==s.merkleRoot){t.next=19;break}return t.abrupt("return",s.claims.map((function(t){return{address:t.address,maxClaimable:t.maxClaimable,price:t.price,currencyAddress:t.currencyAddress}})));case 19:return t.abrupt("return",null);case 20:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function dt(t,e){return t.toString()===l.Bz.toString()?"unlimited":h.formatUnits(t,e)}function mt(t,e,r,n,i,a){return gt.apply(this,arguments)}function gt(){return(gt=(0,c.Z)((0,u.Z)().mark((function t(e,r,n,i,a,o){var s,f,c,l,h,p,y;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,w.a)(n,e.currency,e.pricePerToken);case 2:if(f=t.sent,c=dt(e.maxClaimableSupply,r),l=dt(e.maxClaimablePerWallet,r),h=dt(m.O$.from(e.maxClaimableSupply).sub(e.supplyClaimed),r),p=dt(e.supplyClaimed,r),!e.metadata){t.next=11;break}return t.next=10,a.downloadJSON(e.metadata);case 10:y=t.sent;case 11:if(t.t0=nt,t.t1=e.startTimestamp,t.t2=c,t.t3=l,t.t4=p,t.t5=h,t.t6=null===(s=e.waitTimeInSecondsBetweenClaims)||void 0===s?void 0:s.toString(),t.t7=m.O$.from(e.pricePerToken),t.t8=e.currency,t.t9=e.currency,t.t10=f,t.t11=e.merkleRoot,!o){t.next=29;break}return t.next=26,pt(e.merkleRoot,i,a);case 26:t.t12=t.sent,t.next=30;break;case 29:t.t12=void 0;case 30:return t.t13=t.t12,t.t14=y,t.t15={startTime:t.t1,maxClaimableSupply:t.t2,maxClaimablePerWallet:t.t3,currentMintSupply:t.t4,availableSupply:t.t5,waitInSeconds:t.t6,price:t.t7,currency:t.t8,currencyAddress:t.t9,currencyMetadata:t.t10,merkleRootHash:t.t11,snapshot:t.t13,metadata:t.t14},t.abrupt("return",t.t0.parseAsync.call(t.t0,t.t15));case 34:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function vt(t,e,r){return bt.apply(this,arguments)}function bt(){return(bt=(0,c.Z)((0,u.Z)().mark((function t(e,r,n){var i,a,s,f,c;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e>=n.length)){t.next=2;break}throw Error("Index out of bounds - got index: ".concat(e," with ").concat(n.length," conditions"));case 2:return i=n[e].currencyMetadata.decimals,a=n[e].price,s=h.formatUnits(a,i),t.next=7,et.parseAsync((0,o.Z)((0,o.Z)({},n[e]),{},{price:s},r));case 7:return f=t.sent,t.next=10,nt.parseAsync((0,o.Z)((0,o.Z)({},f),{},{price:a}));case 10:return c=t.sent,t.abrupt("return",n.map((function(t,r){var n;n=r===e?c:t;var a=h.formatUnits(n.price,i);return(0,o.Z)((0,o.Z)({},n),{},{price:a})})));case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var wt=function(t){return t.NotEnoughSupply="There is not enough supply to claim.",t.AddressNotAllowed="This address is not on the allowlist.",t.WaitBeforeNextClaimTransaction="Not enough time since last claim transaction. Please wait.",t.ClaimPhaseNotStarted="Claim phase has not started yet.",t.AlreadyClaimed="You have already claimed the token.",t.WrongPriceOrCurrency="Incorrect price or currency.",t.OverMaxClaimablePerWallet="Cannot claim more than maximum allowed quantity.",t.NotEnoughTokens="There are not enough tokens in the wallet to pay for the claim.",t.NoActiveClaimPhase="There is no active claim phase at the moment. Please check back in later.",t.NoClaimConditionSet="There is no claim condition set.",t.NoWallet="No wallet connected.",t.Unknown="No claim conditions found.",t}({});function xt(t){if(void 0===t){var e=Buffer.alloc(16);return(0,M.Z)({},e),g.hexlify(v.Y0(e.toString("hex")))}return g.hexlify(t)}var kt=function(){return R.z.object({to:b.ba.refine((function(t){return t.toLowerCase()!==d.d}),{message:"Cannot create payload to mint to zero address"}),price:b.cw.default(0),currencyAddress:b.b9.default(b.aW),mintStartTime:L.S,mintEndTime:L.E,uid:R.z.string().optional().transform((function(t){return xt(t)})),primarySaleRecipient:b.ba.default(d.d)})}(),Bt=function(){return kt.extend({quantity:b.cw})}(),Et=function(){return Bt.extend({mintStartTime:b.b6,mintEndTime:b.b6})}(),St=function(){return kt.extend({metadata:C.N,royaltyRecipient:R.z.string().default(d.d),royaltyBps:b.cC.default(0)})}(),Tt=function(){return St.extend({metadata:C.N.default(""),uri:R.z.string(),royaltyBps:b.b6,mintStartTime:b.b6,mintEndTime:b.b6})}(),At=function(){return St.extend({metadata:C.N.default(""),quantity:b.b7})}(),Zt=function(){return At.extend({tokenId:b.b7})}(),It=function(){return Tt.extend({tokenId:b.b6,quantity:b.b6})}(),Pt=function(){return St.extend({metadata:C.N.default(""),quantity:b.b6.default(1)})}(),Ut=function(){return Tt.extend({quantity:b.b6.default(1)})}(),Ot=[{name:"to",type:"address"},{name:"primarySaleRecipient",type:"address"},{name:"quantity",type:"uint256"},{name:"price",type:"uint256"},{name:"currency",type:"address"},{name:"validityStartTimestamp",type:"uint128"},{name:"validityEndTimestamp",type:"uint128"},{name:"uid",type:"bytes32"}],Lt=[{name:"to",type:"address"},{name:"royaltyRecipient",type:"address"},{name:"royaltyBps",type:"uint256"},{name:"primarySaleRecipient",type:"address"},{name:"uri",type:"string"},{name:"price",type:"uint256"},{name:"currency",type:"address"},{name:"validityStartTimestamp",type:"uint128"},{name:"validityEndTimestamp",type:"uint128"},{name:"uid",type:"bytes32"}],Rt=[{name:"to",type:"address"},{name:"royaltyRecipient",type:"address"},{name:"royaltyBps",type:"uint256"},{name:"primarySaleRecipient",type:"address"},{name:"tokenId",type:"uint256"},{name:"uri",type:"string"},{name:"quantity",type:"uint256"},{name:"pricePerToken",type:"uint256"},{name:"currency",type:"address"},{name:"validityStartTimestamp",type:"uint128"},{name:"validityEndTimestamp",type:"uint128"},{name:"uid",type:"bytes32"}],Ct=[{name:"to",type:"address"},{name:"royaltyRecipient",type:"address"},{name:"royaltyBps",type:"uint256"},{name:"primarySaleRecipient",type:"address"},{name:"uri",type:"string"},{name:"quantity",type:"uint256"},{name:"pricePerToken",type:"uint256"},{name:"currency",type:"address"},{name:"validityStartTimestamp",type:"uint128"},{name:"validityEndTimestamp",type:"uint128"},{name:"uid",type:"bytes32"}]},51089:function(t){t.exports=function(t){for(var e=new Buffer(t.length),r=0,n=t.length-1;r<=n;++r,--n)e[r]=t[n],e[n]=t[r];return e}},98842:function(t){t.exports=function(){function t(t,e){var r=e?"\u2514":"\u251c";return r+=t?"\u2500 ":"\u2500\u2500\u2510"}function e(t,e){var r=[];for(var n in t)t.hasOwnProperty(n)&&(e&&"function"===typeof t[n]||r.push(n));return r}function r(n,i,a,o,u,s,f){var c,l,h="",p=0,y=o.slice(0);if(y.push([i,a])&&o.length>0&&(o.forEach((function(t,e){e>0&&(h+=(t[1]?" ":"\u2502")+"  "),l||t[0]!==i||(l=!0)})),h+=t(n,a)+n,u&&("object"!==typeof i||i instanceof Date)&&(h+=": "+i),l&&(h+=" (circular ref.)"),f(h)),!l&&"object"===typeof i){var d=e(i,s);d.forEach((function(t){c=++p===d.length,r(t,i[t],c,y,u,s,f)}))}}var n={asLines:function(t,e,n,i){r(".",t,!1,[],e,"function"!==typeof n&&n,i||n)},asTree:function(t,e,n){var i="";return r(".",t,!1,[],e,n,(function(t){i+=t+"\n"})),i}};return n}()}}]);
//# sourceMappingURL=5938.e9cab1d1.chunk.js.map
"use strict";(self.webpackChunkgeoblocs=self.webpackChunkgeoblocs||[]).push([[1071],{18541:function(n,e,t){t.d(e,{W:function(){return s}});var r=t(15671),i=t(43144),o=t(60136),c=t(29388),a=t(29278),s=function(n){(0,o.Z)(t,n);var e=(0,c.Z)(t);function t(n){var i;(0,r.Z)(this,t);var o=n.chains,c=void 0===o?a.gL9:o,s=n.options;return(i=e.call(this)).chains=c,i.options=s,i}return(0,i.Z)(t,[{key:"getBlockExplorerUrls",value:function(n){var e,t,r=null!==(e=null===(t=n.explorers)||void 0===t?void 0:t.map((function(n){return n.url})))&&void 0!==e?e:[];return r.length>0?r:void 0}},{key:"isChainUnsupported",value:function(n){return!this.chains.some((function(e){return e.chainId===n}))}},{key:"updateChains",value:function(n){this.chains=n}}]),t}(t(38080).Z)},48164:function(n,e,t){t.d(e,{A:function(){return f},C:function(){return v},P:function(){return d},R:function(){return l},S:function(){return Z},U:function(){return g},a:function(){return p}});var r=t(97326),i=t(43144),o=t(15671),c=t(60136),a=t(29388),s=t(28664),u=t(9302),h=function(n){(0,c.Z)(t,n);var e=(0,a.Z)(t);function t(n,r){var i;(0,o.Z)(this,t);var c=r.cause,a=r.code,s=r.data;if(!Number.isInteger(a))throw new Error('"code" must be an integer.');if(!n||"string"!==typeof n)throw new Error('"message" must be a nonempty string.');return(i=e.call(this,"".concat(n,". Cause: ").concat(JSON.stringify(c)))).cause=c,i.code=a,i.data=s,i}return(0,i.Z)(t)}((0,s.Z)(Error)),d=function(n){(0,c.Z)(t,n);var e=(0,a.Z)(t);function t(n,r){(0,o.Z)(this,t);var i=r.cause,c=r.code,a=r.data;if(!(Number.isInteger(c)&&c>=1e3&&c<=4999))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');return e.call(this,n,{cause:i,code:c,data:a})}return(0,i.Z)(t)}(h),f=function(n){(0,c.Z)(t,n);var e=(0,a.Z)(t);function t(){var n;return(0,o.Z)(this,t),n=e.apply(this,arguments),(0,u._)((0,r.Z)(n),"name","AddChainError"),(0,u._)((0,r.Z)(n),"message","Error adding chain"),n}return(0,i.Z)(t)}((0,s.Z)(Error)),v=function(n){(0,c.Z)(t,n);var e=(0,a.Z)(t);function t(n){var i;(0,o.Z)(this,t);var c=n.chainId,a=n.connectorId;return i=e.call(this,'Chain "'.concat(c,'" not configured for connector "').concat(a,'".')),(0,u._)((0,r.Z)(i),"name","ChainNotConfigured"),i}return(0,i.Z)(t)}((0,s.Z)(Error)),p=function(n){(0,c.Z)(t,n);var e=(0,a.Z)(t);function t(){var n;return(0,o.Z)(this,t),n=e.apply(this,arguments),(0,u._)((0,r.Z)(n),"name","ConnectorNotFoundError"),(0,u._)((0,r.Z)(n),"message","Connector not found"),n}return(0,i.Z)(t)}((0,s.Z)(Error)),l=function(n){(0,c.Z)(t,n);var e=(0,a.Z)(t);function t(n){var i;return(0,o.Z)(this,t),i=e.call(this,"Resource unavailable",{cause:n,code:-32002}),(0,u._)((0,r.Z)(i),"name","ResourceUnavailable"),i}return(0,i.Z)(t)}(h),Z=function(n){(0,c.Z)(t,n);var e=(0,a.Z)(t);function t(n){var i;return(0,o.Z)(this,t),i=e.call(this,"Error switching chain",{cause:n,code:4902}),(0,u._)((0,r.Z)(i),"name","SwitchChainError"),i}return(0,i.Z)(t)}(d),g=function(n){(0,c.Z)(t,n);var e=(0,a.Z)(t);function t(n){var i;return(0,o.Z)(this,t),i=e.call(this,"User rejected request",{cause:n,code:4001}),(0,u._)((0,r.Z)(i),"name","UserRejectedRequestError"),i}return(0,i.Z)(t)}(d)},18052:function(n,e,t){function r(n){return"string"===typeof n?Number.parseInt(n,"0x"===n.trim().substring(0,2)?16:10):"bigint"===typeof n?Number(n):n}t.d(e,{n:function(){return r}})},11071:function(n,e,t){t.r(e),t.d(e,{BloctoConnector:function(){return _}});var r=t(29439),i=t(74165),o=t(15861),c=t(15671),a=t(43144),s=t(97326),u=t(60136),h=t(29388),d=t(9302),f=t(18541),v=t(48164),p=t(54324),l=t(97419),Z=t(60723),g=t(49716),w=t(39416),m=t(41176),C=t(18052),_=(t(38080),function(n){(0,u.Z)(t,n);var e=(0,h.Z)(t);function t(n){var r;(0,c.Z)(this,t);var i=n.chains,o=n.options,a=void 0===o?{}:o;return r=e.call(this,{chains:i,options:a}),(0,d._)((0,s.Z)(r),"id",w.w.blocto),(0,d._)((0,s.Z)(r),"name","Blocto"),(0,d._)((0,s.Z)(r),"ready",!0),r._onAccountsChangedBind=r.onAccountsChanged.bind((0,s.Z)(r)),r._onChainChangedBind=r.onChainChanged.bind((0,s.Z)(r)),r._onDisconnectBind=r.onDisconnect.bind((0,s.Z)(r)),r}return(0,a.Z)(t,[{key:"connect",value:function(){var n=(0,o.Z)((0,i.Z)().mark((function n(e){var t,r,o,c,a;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.getProvider(e);case 3:return t=n.sent,this.setupListeners(),this.emit("message",{type:"connecting"}),n.next=8,t.request({method:"eth_requestAccounts"});case 8:return r=n.sent,o=l.getAddress(r[0]),n.next=12,this.getChainId();case 12:return c=n.sent,a=this.isChainUnsupported(c),n.abrupt("return",{account:o,chain:{id:c,unsupported:a},provider:t});case 17:if(n.prev=17,n.t0=n.catch(0),this._handleConnectReset(),!this._isUserRejectedRequestError(n.t0)){n.next=22;break}throw new v.U(n.t0);case 22:throw n.t0;case 23:case"end":return n.stop()}}),n,this,[[0,17]])})));return function(e){return n.apply(this,arguments)}}()},{key:"disconnect",value:function(){var n=(0,o.Z)((0,i.Z)().mark((function n(){var e;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getProvider();case 2:return e=n.sent,n.next=5,e.request({method:"wallet_disconnect"});case 5:this.removeListeners(),this._handleConnectReset();case 7:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}()},{key:"getAccount",value:function(){var n=(0,o.Z)((0,i.Z)().mark((function n(){var e,t,o,c,a;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getProvider();case 2:return e=n.sent,n.next=5,e.request({method:"eth_accounts"});case 5:if(t=n.sent,o=t||[],c=(0,r.Z)(o,1),a=c[0]){n.next=9;break}throw new Error("No accounts found");case 9:return n.abrupt("return",a);case 10:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}()},{key:"getChainId",value:function(){var n=(0,o.Z)((0,i.Z)().mark((function n(){var e,t;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getProvider();case 2:return e=n.sent,n.next=5,e.request({method:"eth_chainId"});case 5:return t=n.sent,n.abrupt("return",(0,C.n)(t));case 7:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}()},{key:"getProvider",value:function(){var n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).chainId;if(!this._provider){var e,t,r,i,o,c=null!==(e=null!==(t=null!==n&&void 0!==n?n:this.options.chainId)&&void 0!==t?t:null===(r=this.chains[0])||void 0===r?void 0:r.chainId)&&void 0!==e?e:1,a=null===(i=this.chains.find((function(n){return n.chainId===c})))||void 0===i?void 0:i.rpc[0];this._provider=null===(o=new p.Z({ethereum:{chainId:c,rpc:a},appId:this.options.appId}))||void 0===o?void 0:o.ethereum}if(!this._provider)throw new v.a;return Promise.resolve(this._provider)}},{key:"getSigner",value:function(){var n=(0,o.Z)((0,i.Z)().mark((function n(){var e,t,o,c,a,s=arguments;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=(s.length>0&&void 0!==s[0]?s[0]:{}).chainId,n.next=3,Promise.all([this.getProvider(),this.getAccount()]);case 3:return t=n.sent,o=(0,r.Z)(t,2),c=o[0],a=o[1],n.abrupt("return",new Z.Q(c,e).getSigner(a));case 8:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}()},{key:"isAuthorized",value:function(){var n=(0,o.Z)((0,i.Z)().mark((function n(){var e,t;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",null!==(e=!(null===(t=this._provider)||void 0===t||null===(t=t._blocto)||void 0===t||!t.sessionKey))&&void 0!==e&&e);case 1:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}()},{key:"switchChain",value:function(){var n=(0,o.Z)((0,i.Z)().mark((function n(e){var t,r,o;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getProvider();case 2:if(t=n.sent,r=g.hexValue(e),o=this.chains.find((function(n){return n.chainId===e}))){n.next=7;break}throw new v.S(new Error("chain not found on connector."));case 7:if(t._blocto.supportNetworkList["".concat(e)]){n.next=10;break}throw new v.S(new Error("Blocto unsupported chain: ".concat(r)));case 10:return n.prev=10,n.next=13,t.request({method:"wallet_addEthereumChain",params:[{chainId:r,rpcUrls:(0,m.g)(o)}]});case 13:return n.next=15,t.request({method:"wallet_switchEthereumChain",params:[{chainId:r}]});case 15:return n.abrupt("return",o);case 18:if(n.prev=18,n.t0=n.catch(10),!this._isUserRejectedRequestError(n.t0)){n.next=22;break}throw new v.U(n.t0);case 22:throw new v.S(n.t0);case 23:case"end":return n.stop()}}),n,this,[[10,18]])})));return function(e){return n.apply(this,arguments)}}()},{key:"onAccountsChanged",value:function(){}},{key:"onChainChanged",value:function(){var n=(0,o.Z)((0,i.Z)().mark((function n(e){var t,r,o;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=(0,C.n)(e),r=this.isChainUnsupported(t),n.next=4,this.getAccount();case 4:o=n.sent,this.emit("change",{chain:{id:t,unsupported:r},account:o});case 6:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}()},{key:"onDisconnect",value:function(){this.emit("disconnect")}},{key:"setupListeners",value:function(){var n=(0,o.Z)((0,i.Z)().mark((function n(){var e;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getProvider();case 2:(e=n.sent).on("accountsChanged",this._onAccountsChangedBind),e.on("chainChanged",this._onChainChangedBind),e.on("disconnect",this._onDisconnectBind);case 6:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}()},{key:"removeListeners",value:function(){var n=(0,o.Z)((0,i.Z)().mark((function n(){var e;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getProvider();case 2:(e=n.sent).off("accountsChanged",this._onAccountsChangedBind),e.off("chainChanged",this._onChainChangedBind),e.off("disconnect",this._onDisconnectBind);case 6:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}()},{key:"_isUserRejectedRequestError",value:function(n){return/(user rejected)/i.test(n.message)}},{key:"_handleConnectReset",value:function(){this._provider=void 0}}]),t}(f.W))}}]);
//# sourceMappingURL=1071.01513d1b.chunk.js.map
"use strict";(self.webpackChunkgeoblocs=self.webpackChunkgeoblocs||[]).push([[7529],{97529:function(t,r,e){e.d(r,{E:function(){return G},a:function(){return Q}});var n=e(1413),a=e(93433),c=e(29439),i=e(44925),s=e(74165),u=e(15861),o=e(43144),p=e(15671),d=e(4942),f=e(6222),h=e(2257),l=e(83374),v=e(68624),m=e(84530),Z=e(65054),y=e(68365),g=e(22105),k=e(31109),x=e(80391),w=e(36980),b=e(79601),W=e(89462),T=e(31714),C=e(18281),S=e(75580),M=e(44554),E=e(46413),I=e(60874),P=e(59349),R=["id","uri"],N=(0,o.Z)((function t(r){var e=this;(0,p.Z)(this,t),(0,d.Z)(this,"featureName",y.cI.name),(0,d.Z)(this,"token",(0,w.d)(function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",w.T.fromContractWrapper({contractWrapper:e.contractWrapper,method:"burn",args:[r]}));case 1:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}())),this.contractWrapper=r})),L=(0,o.Z)((function t(r,e,n){var a=this;(0,p.Z)(this,t),(0,d.Z)(this,"featureName",y.cJ.name),(0,d.Z)(this,"to",(0,w.d)(function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r,e,n){var c;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.conditions.getClaimTransaction(r,e,n);case 2:return(c=t.sent).setParse((function(t){for(var r=a.contractWrapper.parseLogs("TokensClaimed",null===t||void 0===t?void 0:t.logs)[0].args.startTokenId,n=r.add(e),c=[],i=function(r){c.push({id:r,receipt:t,data:function(){return a.erc721.get(r)}})},s=r;s.lt(n);s=s.add(1))i(s);return c})),t.abrupt("return",c);case 5:case"end":return t.stop()}}),t)})));return function(r,e,n){return t.apply(this,arguments)}}())),this.erc721=r,this.contractWrapper=e,this.storage=n;var c=new k.C(this.contractWrapper,y.bg,this.storage);this.conditions=new b.D(this.contractWrapper,c,this.storage)}));var A=function(){function t(r,e){var n=this;(0,p.Z)(this,t),(0,d.Z)(this,"featureName",y.cK.name),(0,d.Z)(this,"to",(0,w.d)(function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r,e,a){var c,i,u,o,p,d,l;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(c=n.contractWrapper.getSigner())||void 0===c?void 0:c.getAddress();case 2:if(i=t.sent,r===i){t.next=5;break}throw new Error("Zora Drop: Destination address must match connected wallet address");case 5:if(null===a||void 0===a||!a.pricePerToken){t.next=7;break}throw new Error("Zora Drop: Custom pricePerToken is not supported. Price is automatically calculated");case 7:return t.next=9,n.getSaleDetails();case 9:return u=t.sent,o=u.publicSalePrice,s="0.000777",p=f.parseEther(y.cv.parse(s)),d=h.O$.from(o).add(p).mul(e),(l=w.T.fromContractWrapper({contractWrapper:n.contractWrapper,method:"purchase",args:[e],overrides:{value:d}})).setParse((function(t){for(var r=n.contractWrapper.parseLogs("Sale",null===t||void 0===t?void 0:t.logs)[0].args.firstPurchasedTokenId,a=r.add(e),c=[],i=function(r){c.push({id:r,receipt:t,data:function(){return n.erc721.get(r)}})},s=r;s.lt(a);s=s.add(1))i(s);return c})),t.abrupt("return",l);case 16:case"end":return t.stop()}var s}),t)})));return function(r,e,n){return t.apply(this,arguments)}}())),this.erc721=r,this.contractWrapper=e}return(0,o.Z)(t,[{key:"getSaleDetails",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.contractWrapper.read("saleDetails",[]));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}(),O=function(){function t(r,e){var n=this;(0,p.Z)(this,t),(0,d.Z)(this,"featureName",y.cL.name),(0,d.Z)(this,"to",(0,w.d)(function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r,e,a){var c;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getClaimTransaction(r,e,a);case 2:return(c=t.sent).setParse((function(t){for(var r=n.contractWrapper.parseLogs("TokensClaimed",null===t||void 0===t?void 0:t.logs)[0].args.startTokenId,a=r.add(e),c=[],i=function(r){c.push({id:r,receipt:t,data:function(){return n.erc721.get(r)}})},s=r;s.lt(a);s=s.add(1))i(s);return c})),t.abrupt("return",c);case 5:case"end":return t.stop()}}),t)})));return function(r,e,n){return t.apply(this,arguments)}}())),this.erc721=r,this.contractWrapper=e}return(0,o.Z)(t,[{key:"getClaimTransaction",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r,e,n){var a;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a={},!n||!n.pricePerToken){t.next=5;break}return t.next=4,(0,W.c)(this.contractWrapper,n.pricePerToken,e,n.currencyAddress,n.checkERC20Allowance);case 4:a=t.sent;case 5:return t.abrupt("return",w.T.fromContractWrapper({contractWrapper:this.contractWrapper,method:"claim",args:[r,e],overrides:a}));case 6:case"end":return t.stop()}}),t,this)})));return function(r,e,n){return t.apply(this,arguments)}}()}]),t}(),B=function(){function t(r,e,n){var a=this;(0,p.Z)(this,t),(0,d.Z)(this,"featureName",y.cM.name),(0,d.Z)(this,"lazyMint",(0,w.d)(function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r,e){var n,c,i;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.erc721.nextTokenIdToMint();case 2:return n=t.sent,t.next=5,(0,x.u)(r,a.storage,n.toNumber(),e);case 5:return c=t.sent,i=(0,x.g)(c),t.abrupt("return",w.T.fromContractWrapper({contractWrapper:a.contractWrapper,method:"lazyMint",args:[c.length,i.endsWith("/")?i:"".concat(i,"/"),l.Y0("")],parse:function(t){for(var r=a.contractWrapper.parseLogs("TokensLazyMinted",null===t||void 0===t?void 0:t.logs),e=r[0].args.startTokenId,n=r[0].args.endTokenId,c=[],i=function(r){c.push({id:r,receipt:t,data:function(){return a.erc721.getTokenMetadata(r)}})},s=e;s.lte(n);s=s.add(1))i(s);return c}}));case 8:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}())),(0,d.Z)(this,"updateMetadata",(0,w.d)(function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r,e,n){var c,u,o,p,d,f,l,v,m,Z,y,g,k,b,W;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.contractWrapper.read("getBaseURICount",[]);case 2:if(!(c=t.sent).eq(0)){t.next=5;break}throw new Error("No base URI set. Please set a base URI before updating metadata");case 5:u=h.O$.from(r),o=h.O$.from(0),p=h.O$.from(0),d=0,f=0;case 10:if(!(f<c.toNumber())){t.next=21;break}return d=f,t.next=14,a.contractWrapper.read("getBatchIdAtIndex",[d]);case 14:if(!(p=t.sent).gt(u)){t.next=17;break}return t.abrupt("break",21);case 17:o=p;case 18:f++,t.next=10;break;case 21:return l=Array.from({length:p.sub(o).toNumber()},(function(t,r){return r+o.toNumber()})),t.next=24,Promise.all(l.map((function(t){return a.erc721.getTokenMetadata(t)})));case 24:for(v=t.sent,m=[],Z=0;Z<v.length;Z++)y=v[Z],g=y.id,y.uri,k=(0,i.Z)(y,R),h.O$.from(u).eq(h.O$.from(g))?m.push(e):m.push(k);return t.next=29,(0,x.u)(m,a.storage,o.toNumber(),n);case 29:return b=t.sent,W=b[0].substring(0,b[0].lastIndexOf("/")),t.abrupt("return",w.T.fromContractWrapper({contractWrapper:a.contractWrapper,method:"updateBatchBaseURI",args:[d,"".concat(W.endsWith("/")?W:"".concat(W,"/"))]}));case 32:case"end":return t.stop()}}),t)})));return function(r,e,n){return t.apply(this,arguments)}}())),this.erc721=r,this.contractWrapper=e,this.storage=n,this.revealer=this.detectErc721Revealable()}return(0,o.Z)(t,[{key:"detectErc721Revealable",value:function(){var t=this;if((0,k.d)(this.contractWrapper,"ERC721Revealable"))return new W.D(this.contractWrapper,this.storage,y.cN.name,(function(){return t.erc721.nextTokenIdToMint()}))}}]),t}(),D=(0,o.Z)((function t(r){var e=this;(0,p.Z)(this,t),(0,d.Z)(this,"featureName",y.cO.name),(0,d.Z)(this,"cancel",(0,w.d)(function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",w.T.fromContractWrapper({contractWrapper:e.contractWrapper,method:"cancel",args:[r]}));case 1:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}())),(0,d.Z)(this,"revoke",(0,w.d)(function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",w.T.fromContractWrapper({contractWrapper:e.contractWrapper,method:"revoke",args:[r]}));case 1:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}())),this.contractWrapper=r})),q=(0,o.Z)((function t(r,e){var n=this;(0,p.Z)(this,t),(0,d.Z)(this,"featureName",y.cP.name),(0,d.Z)(this,"update",(0,w.d)(function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r,e){var a;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,x.b)(e,n.storage);case 2:return a=t.sent,t.abrupt("return",w.T.fromContractWrapper({contractWrapper:n.contractWrapper,method:"setTokenURI",args:[r,a]}));case 4:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}())),this.contractWrapper=r,this.storage=e})),z=(0,o.Z)((function t(r,e,n){var a=this;(0,p.Z)(this,t),(0,d.Z)(this,"featureName",y.cQ.name),(0,d.Z)(this,"to",(0,w.d)(function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r,e){var n,i,u,o,p,d;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([(0,x.u)(e,a.storage),(0,y.aL)(r)]);case 2:return n=t.sent,i=(0,c.Z)(n,2),u=i[0],o=i[1],p=new T.C(a.contractWrapper),d=u.map((function(t){return p.encode("mintTo",[o,t])})),t.abrupt("return",w.T.fromContractWrapper({contractWrapper:a.contractWrapper,method:"multicall",args:[d],parse:function(t){var r=a.contractWrapper.parseLogs("TokensMinted",t.logs);if(0===r.length||r.length<e.length)throw new Error("TokenMinted event not found, minting failed");return r.map((function(r){var e=r.args.tokenIdMinted;return{id:e,receipt:t,data:function(){return a.erc721.get(e)}}}))}}));case 9:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}())),this.erc721=r,this.contractWrapper=e,this.storage=n})),U=function(){function t(r,e,n){var a=this;(0,p.Z)(this,t),(0,d.Z)(this,"featureName",y.cR.name),(0,d.Z)(this,"to",(0,w.d)(function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r,e){var n,i,u,o;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([(0,x.b)(e,a.storage),(0,y.aL)(r)]);case 2:return n=t.sent,i=(0,c.Z)(n,2),u=i[0],o=i[1],t.abrupt("return",w.T.fromContractWrapper({contractWrapper:a.contractWrapper,method:"mintTo",args:[o,u],parse:function(t){var r=a.contractWrapper.parseLogs("Transfer",null===t||void 0===t?void 0:t.logs);if(0===r.length)throw new Error("TransferEvent event not found");var e=r[0].args.tokenId;return{id:e,receipt:t,data:function(){return a.erc721.get(e)}}}}));case 7:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}())),this.erc721=r,this.contractWrapper=e,this.storage=n,this.batch=this.detectErc721BatchMintable()}return(0,o.Z)(t,[{key:"getMintTransaction",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r,e){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this.to,t.next=3,(0,y.aL)(r);case 3:return t.t1=t.sent,t.t2=e,t.abrupt("return",t.t0.prepare.call(t.t0,t.t1,t.t2));case 6:case"end":return t.stop()}}),t,this)})));return function(r,e){return t.apply(this,arguments)}}()},{key:"detectErc721BatchMintable",value:function(){if((0,k.d)(this.contractWrapper,"ERC721BatchMintable"))return new z(this.erc721,this.contractWrapper,this.storage)}}]),t}(),F=function(){function t(r,e){var n=this;(0,p.Z)(this,t),(0,d.Z)(this,"featureName",y.cS.name),(0,d.Z)(this,"set",(0,w.d)(function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r){var e,a,i,u,o,p;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(e=S.B.parse(r)).description=n.sanitizeJSONString(e.description),a=[],(0,C.XT)(e.image)?a.push(n.storage.upload(e.image)):"string"===typeof e.image?a.push(Promise.resolve(e.image)):a.push(Promise.resolve(void 0)),(0,C.XT)(e.animation_url)?a.push(n.storage.upload(e.animation_url)):"string"===typeof e.animation_url?a.push(Promise.resolve(e.animation_url)):a.push(Promise.resolve(void 0)),t.next=7,Promise.all(a);case 7:return i=t.sent,u=(0,c.Z)(i,2),o=u[0],p=u[1],t.abrupt("return",w.T.fromContractWrapper({contractWrapper:n.contractWrapper,method:"setSharedMetadata",args:[{name:"".concat(e.name||""),description:e.description||"",imageURI:o||"",animationURI:p||""}]}));case 12:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}())),this.contractWrapper=r,this.storage=e}return(0,o.Z)(t,[{key:"get",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(){var r;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.contractWrapper.read("sharedMetadata",[]);case 2:if(!(r=t.sent).every((function(t){return""===t}))){t.next=5;break}return t.abrupt("return",void 0);case 5:return t.abrupt("return",{name:r.name,description:r.description,image:r.imageURI,animation_url:r.animationURI});case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"sanitizeJSONString",value:function(t){if(!t)return t;var r=JSON.stringify(t);return r.slice(1,r.length-1)}}]),t}(),$=function(){function t(r,e){(0,p.Z)(this,t),(0,d.Z)(this,"featureName",y.cT.name),this.erc721=r,this.contractWrapper=e}return(0,o.Z)(t,[{key:"all",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r,e){var n,a,c,i=this;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.tokenIds(r);case 2:return n=t.sent,e&&(a=(null===e||void 0===e?void 0:e.start)||0,c=(null===e||void 0===e?void 0:e.count)||x.D,n=n.slice(a,a+c)),t.next=6,Promise.all(n.map((function(t){return i.erc721.get(t.toString())})));case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));return function(r,e){return t.apply(this,arguments)}}()},{key:"tokenIds",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r){var e,n,a,c=this;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=y.aL,t.t1=r,t.t1){t.next=6;break}return t.next=5,this.contractWrapper.getSignerAddress();case 5:t.t1=t.sent;case 6:return t.t2=t.t1,t.next=9,(0,t.t0)(t.t2);case 9:return e=t.sent,t.next=12,this.contractWrapper.read("balanceOf",[e]);case 12:return n=t.sent,a=Array.from(Array(n.toNumber()).keys()),t.next=16,Promise.all(a.map((function(t){return c.contractWrapper.read("tokenOfOwnerByIndex",[e,t])})));case 16:return t.abrupt("return",t.sent);case 17:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()}]),t}(),V=function(){function t(r,e){(0,p.Z)(this,t),(0,d.Z)(this,"featureName",y.cU.name),this.erc721=r,this.contractWrapper=e}return(0,o.Z)(t,[{key:"all",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r,e){var n,a,c,i=this;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.tokenIds(r);case 2:return n=t.sent,e&&(a=(null===e||void 0===e?void 0:e.start)||0,c=(null===e||void 0===e?void 0:e.count)||x.D,n=n.slice(a,a+c)),t.next=6,Promise.all(n.map((function(t){return i.erc721.get(t.toString())})));case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));return function(r,e){return t.apply(this,arguments)}}()},{key:"tokenIds",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r){var e;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=y.aL,t.t1=r,t.t1){t.next=6;break}return t.next=5,this.contractWrapper.getSignerAddress();case 5:t.t1=t.sent;case 6:return t.t2=t.t1,t.next=9,(0,t.t0)(t.t2);case 9:return e=t.sent,t.next=12,this.contractWrapper.read("tokensOfOwner",[e]);case 12:return t.abrupt("return",t.sent);case 13:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()}]),t}(),_=function(){function t(r,e){(0,p.Z)(this,t),(0,d.Z)(this,"featureName",y.cV.name),this.erc721=r,this.contractWrapper=e,this.owned=this.detectErc721Owned()}return(0,o.Z)(t,[{key:"all",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r){var e,n,c,i,u,o=this;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=h.O$.from(0),!(0,k.h)("startTokenId",this.contractWrapper)){t.next=5;break}return t.next=4,this.contractWrapper.read("startTokenId",[]);case 4:e=t.sent;case 5:return n=h.O$.from((null===r||void 0===r?void 0:r.start)||0).add(e).toNumber(),c=h.O$.from((null===r||void 0===r?void 0:r.count)||x.D).toNumber(),t.next=9,this.erc721.nextTokenIdToMint();case 9:return i=t.sent,u=Math.min(i.add(e).toNumber(),n+c),t.next=13,Promise.all((0,a.Z)(Array(u-n).keys()).map((function(t){return o.erc721.get((n+t).toString())})));case 13:return t.abrupt("return",t.sent);case 14:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"allOwners",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r){var e,n,c,i,u,o,p=this;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=h.O$.from(0),!(0,k.h)("startTokenId",this.contractWrapper)){t.next=5;break}return t.next=4,this.contractWrapper.read("startTokenId",[]);case 4:n=t.sent;case 5:return t.prev=5,t.next=8,this.erc721.totalClaimedSupply();case 8:e=t.sent,t.next=16;break;case 11:return t.prev=11,t.t0=t.catch(5),t.next=15,this.totalCount();case 15:e=t.sent;case 16:return e=e.add(n),c=(0,a.Z)(new Array(e.toNumber()).keys()),r&&(i=(null===r||void 0===r?void 0:r.start)||0,u=(null===r||void 0===r?void 0:r.count)||x.D,c=c.slice(i,i+u)),t.next=21,Promise.all(c.map((function(t){return p.erc721.ownerOf(t).catch((function(){return v.d}))})));case 21:return o=t.sent,t.abrupt("return",c.map((function(t){return{tokenId:t,owner:o[t]}})).filter((function(t){return t.owner!==v.d})));case 23:case"end":return t.stop()}}),t,this,[[5,11]])})));return function(r){return t.apply(this,arguments)}}()},{key:"totalCount",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.erc721.nextTokenIdToMint();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"totalCirculatingSupply",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.contractWrapper.read("totalSupply",[]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"detectErc721Owned",value:function(){return(0,k.d)(this.contractWrapper,"ERC721Enumerable")?new $(this.erc721,this.contractWrapper):(0,k.d)(this.contractWrapper,"ERC721AQueryable")?new V(this.erc721,this.contractWrapper):void 0}}]),t}(),J=function(){return P.B.extend({tierPriority:I.z.array(I.z.string()),royaltyRecipient:y.b9.default(v.d),royaltyBps:y.cB.default(0),quantity:y.b5.default(1)})}(),Y=[{name:"validityStartTimestamp",type:"uint128"},{name:"validityEndTimestamp",type:"uint128"},{name:"uid",type:"bytes32"},{name:"data",type:"bytes"}],X=function(){function t(r,e,n){var a=this;(0,p.Z)(this,t),(0,d.Z)(this,"featureName",y.cW.name),(0,d.Z)(this,"createBatchWithTier",(0,w.d)(function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r,e,n){var c,i,u;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.erc721.nextTokenIdToMint();case 2:return c=t.sent,t.next=5,(0,x.u)(r,a.storage,c.toNumber(),n);case 5:return i=t.sent,u=(0,x.g)(i),t.abrupt("return",w.T.fromContractWrapper({contractWrapper:a.contractWrapper,method:"lazyMint",args:[i.length,u.endsWith("/")?u:"".concat(u,"/"),e,l.Y0("")],parse:function(t){for(var r=a.contractWrapper.parseLogs("TokensLazyMinted",null===t||void 0===t?void 0:t.logs),e=r[0].args[1],n=r[0].args[2],c=[],i=function(r){c.push({id:r,receipt:t,data:function(){return a.erc721.getTokenMetadata(r)}})},s=e;s.lte(n);s=s.add(1))i(s);return c}}));case 8:case"end":return t.stop()}}),t)})));return function(r,e,n){return t.apply(this,arguments)}}())),(0,d.Z)(this,"createDelayedRevealBatchWithTier",(0,w.d)(function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r,e,n,c,i){var u,o,p,d,f,h,v,y,g,k,b;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}throw new Error("Password is required");case 2:return t.next=4,a.storage.uploadBatch([S.a.parse(r)],{rewriteFileNames:{fileStartNumber:0}});case 4:return u=t.sent,o=(0,x.g)(u),t.next=8,a.erc721.nextTokenIdToMint();case 8:return p=t.sent,t.next=11,a.storage.uploadBatch(e.map((function(t){return S.a.parse(t)})),{onProgress:null===i||void 0===i?void 0:i.onProgress,rewriteFileNames:{fileStartNumber:p.toNumber()}});case 11:return d=t.sent,f=(0,x.g)(d),t.next=15,a.contractWrapper.read("getBaseURICount",[]);case 15:return h=t.sent,t.next=18,a.contractWrapper.getChainID();case 18:return v=t.sent,y=m.keccak256(["string","uint256","uint256","address"],[n,v,h,a.contractWrapper.address]),t.next=22,a.contractWrapper.read("encryptDecrypt",[l.Y0(f),y]);case 22:return g=t.sent,k=m.keccak256(["bytes","bytes","uint256"],[l.Y0(f),y,v]),b=Z.$.encode(["bytes","bytes32"],[g,k]),t.abrupt("return",w.T.fromContractWrapper({contractWrapper:a.contractWrapper,method:"lazyMint",args:[d.length,o.endsWith("/")?o:"".concat(o,"/"),c,b],parse:function(t){for(var r=a.contractWrapper.parseLogs("TokensLazyMinted",null===t||void 0===t?void 0:t.logs),e=r[0].args[1],n=r[0].args[2],c=[],i=function(r){c.push({id:r,receipt:t,data:function(){return a.erc721.getTokenMetadata(r)}})},s=e;s.lte(n);s=s.add(1))i(s);return c}}));case 26:case"end":return t.stop()}}),t)})));return function(r,e,n,a,c){return t.apply(this,arguments)}}())),(0,d.Z)(this,"reveal",(0,w.d)(function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r,e){var n,c,i;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}throw new Error("Password is required");case 2:return t.next=4,a.contractWrapper.getChainID();case 4:return n=t.sent,c=m.keccak256(["string","uint256","uint256","address"],[e,n,r,a.contractWrapper.address]),t.prev=6,t.next=9,a.contractWrapper.callStatic().reveal(r,c);case 9:if((i=t.sent).includes("://")&&i.endsWith("/")){t.next=12;break}throw new Error("invalid password");case 12:t.next=17;break;case 14:throw t.prev=14,t.t0=t.catch(6),new Error("invalid password");case 17:return t.abrupt("return",w.T.fromContractWrapper({contractWrapper:a.contractWrapper,method:"reveal",args:[r,c]}));case 18:case"end":return t.stop()}}),t,null,[[6,14]])})));return function(r,e){return t.apply(this,arguments)}}())),this.erc721=r,this.contractWrapper=e,this.storage=n}return(0,o.Z)(t,[{key:"getMetadataInTier",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r){var e,n,a,c=this;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.contractWrapper.read("getMetadataForAllTiers",[]);case 2:if(e=t.sent,n=e.find((function(t){return t.tier===r}))){t.next=6;break}throw new Error("Tier not found in contract.");case 6:return t.next=8,Promise.all(n.ranges.map((function(t,r){for(var e=[],a=n.baseURIs[r],i=t.startIdInclusive.toNumber();i<t.endIdNonInclusive.toNumber();i++){var s=a.endsWith("/")?"".concat(a).concat(i):"".concat(a,"/").concat(i),u=c.storage.downloadJSON(s);e.push(u)}return e})).flat());case 8:return a=t.sent,t.abrupt("return",a);case 10:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"getTokensInTier",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r){var e,n,a,c=this;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.contractWrapper.read("getTokensInTierLen",[]);case 2:if(!(e=t.sent).eq(0)){t.next=5;break}return t.abrupt("return",[]);case 5:return t.next=7,this.contractWrapper.read("getTokensInTier",[r,0,e]);case 7:return n=t.sent,t.next=10,Promise.all(n.map((function(t){for(var r=[],e=t.startIdInclusive.toNumber();e<t.endIdNonInclusive.toNumber();e++)r.push(c.erc721.get(e));return r})).flat());case 10:return a=t.sent,t.abrupt("return",a);case 12:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"generate",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r){var e,n,a;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.generateBatch([r]);case 2:return e=t.sent,n=(0,c.Z)(e,1),a=n[0],t.abrupt("return",a);case 6:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"generateBatch",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r){var e,n,a,c=this;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(r.map((function(t){return J.parseAsync(t)})));case 2:return e=t.sent,t.next=5,this.contractWrapper.getChainID();case 5:return n=t.sent,a=this.contractWrapper.getSigner(),(0,M.Z)(a,"No signer available"),t.next=10,Promise.all(e.map(function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r){var e;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=c.contractWrapper,t.t1=a,t.t2={name:"SignatureAction",version:"1",chainId:n,verifyingContract:c.contractWrapper.address},t.t3={GenericRequest:Y},t.next=6,c.mapPayloadToContractStruct(r);case 6:return t.t4=t.sent,t.next=9,t.t0.signTypedData.call(t.t0,t.t1,t.t2,t.t3,t.t4);case 9:return e=t.sent,t.abrupt("return",{payload:r,signature:e.toString()});case 11:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}()));case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"verify",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r){var e,n;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.mapPayloadToContractStruct(r.payload);case 2:return e=t.sent,t.next=5,this.contractWrapper.read("verify",[e,r.signature]);case 5:return n=t.sent,t.abrupt("return",n[0]);case 7:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"claimWithSignature",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r){var e,n,a,c,i,u,o,p,d,f,h=this;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.mapPayloadToContractStruct(r.payload);case 2:return e=t.sent,t.next=5,(0,E.n)(this.contractWrapper.getProvider(),r.payload.price,r.payload.currencyAddress);case 5:return n=t.sent,t.next=8,this.contractWrapper.getCallOverrides();case 8:return a=t.sent,t.next=11,(0,S.s)(this.contractWrapper,n,r.payload.currencyAddress,a);case 11:return t.next=13,this.contractWrapper.sendTransaction("claimWithSignature",[e,r.signature],a);case 13:c=t.sent,i=this.contractWrapper.parseLogs("TokensClaimed",null===c||void 0===c?void 0:c.logs),u=i[0].args.startTokenId,o=u.add(i[0].args.quantityClaimed),p=[],d=(0,s.Z)().mark((function t(r){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:p.push({id:r,receipt:c,data:function(){return h.erc721.get(r)}});case 1:case"end":return t.stop()}}),t)})),f=u;case 20:if(!f.lt(o)){t.next=25;break}return t.delegateYield(d(f),"t0",22);case 22:f=f.add(1),t.next=20;break;case 25:return t.abrupt("return",p);case 26:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"mapPayloadToContractStruct",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r){var e,n;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,E.n)(this.contractWrapper.getProvider(),r.price,r.currencyAddress);case 2:return e=t.sent,n=Z.$.encode(["string[]","address","address","uint256","address","uint256","uint256","address"],[r.tierPriority,r.to,r.royaltyRecipient,r.royaltyBps,r.primarySaleRecipient,r.quantity,e,r.currencyAddress]),t.abrupt("return",{uid:r.uid,validityStartTimestamp:r.mintStartTime,validityEndTimestamp:r.mintEndTime,data:n});case 5:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()}]),t}(),Q=function(){function t(r,e){var n=this;(0,p.Z)(this,t),(0,d.Z)(this,"featureName",y.cX.name),(0,d.Z)(this,"mint",(0,w.d)(function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r){var e,a,c,i,u,o,p,d;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.payload,a=r.signature,t.next=4,n.contractWrapper.getCallOverrides();case 4:return c=t.sent,i=function(t){var r=n.contractWrapper.parseLogs("TokensMintedWithSignature",t.logs);if(0===r.length)throw new Error("No MintWithSignature event found");return{id:r[0].args.tokenIdMinted,receipt:t}},t.next=8,n.isLegacyNFTContract();case 8:if(!t.sent){t.next=18;break}return t.next=11,n.mapLegacyPayloadToContractStruct(e);case 11:return u=t.sent,o=u.price,t.next=15,(0,S.s)(n.contractWrapper,o,e.currencyAddress,c);case 15:return t.abrupt("return",w.T.fromContractWrapper({contractWrapper:n.contractWrapper,method:"mintWithSignature",args:[u,a],overrides:c,parse:i}));case 18:return t.next=20,n.mapPayloadToContractStruct(e);case 20:return p=t.sent,d=p.pricePerToken.mul(p.quantity),t.next=24,(0,S.s)(n.contractWrapper,d,e.currencyAddress,c);case 24:return t.abrupt("return",w.T.fromContractWrapper({contractWrapper:n.contractWrapper,method:"mintWithSignature",args:[p,a],overrides:c,parse:i}));case 25:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}())),(0,d.Z)(this,"mintBatch",(0,w.d)(function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r){var e,a,c,i;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.isLegacyNFTContract();case 2:return e=t.sent,t.next=5,Promise.all(r.map((function(t){return e?n.mapLegacyPayloadToContractStruct(t.payload):n.mapPayloadToContractStruct(t.payload)})));case 5:if(a=t.sent.map((function(t,e){var n=r[e],a=n.signature,c=n.payload.price;if(h.O$.from(c).gt(0))throw new Error("Can only batch free mints. For mints with a price, use regular mint()");return{message:t,signature:a}})),c=new T.C(n.contractWrapper),i=a.map((function(t){return c.encode("mintWithSignature",[t.message,t.signature])})),!(0,k.h)("multicall",n.contractWrapper)){t.next=12;break}return t.abrupt("return",w.T.fromContractWrapper({contractWrapper:n.contractWrapper,method:"multicall",args:[i],parse:function(t){var r=n.contractWrapper.parseLogs("TokensMintedWithSignature",t.logs);if(0===r.length)throw new Error("No MintWithSignature event found");return r.map((function(r){return{id:r.args.tokenIdMinted,receipt:t}}))}}));case 12:throw new Error("Multicall not available on this contract!");case 13:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}())),this.contractWrapper=r,this.storage=e}return(0,o.Z)(t,[{key:"verify",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r){var e,n,a,c,i;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.isLegacyNFTContract();case 2:if(e=t.sent,n=r.payload,a=r.signature,!e){t.next=14;break}return t.next=8,this.mapLegacyPayloadToContractStruct(n);case 8:return c=t.sent,t.next=11,this.contractWrapper.read("verify",[c,a]);case 11:i=t.sent,t.next=20;break;case 14:return t.next=16,this.mapPayloadToContractStruct(n);case 16:return c=t.sent,t.next=19,this.contractWrapper.read("verify",[c,a]);case 19:i=t.sent;case 20:return t.abrupt("return",i[0]);case 21:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"generate",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.generateBatch([r]);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"generateBatch",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r){var e,a,c,i,o,p,d=this;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.isLegacyNFTContract();case 2:return e=t.sent,t.next=5,Promise.all(r.map((function(t){return P.t.parseAsync(t)})));case 5:return a=t.sent,c=a.map((function(t){return t.metadata})),t.next=9,(0,x.u)(c,this.storage);case 9:return i=t.sent,t.next=12,this.contractWrapper.getChainID();case 12:return o=t.sent,p=this.contractWrapper.getSigner(),(0,M.Z)(p,"No signer available"),t.next=17,Promise.all(a.map(function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r,a){var c,u,f;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=i[a],t.next=3,P.u.parseAsync((0,n.Z)((0,n.Z)({},r),{},{uri:c}));case 3:if(u=t.sent,!e){t.next=17;break}return t.t0=d.contractWrapper,t.t1=p,t.t2={name:"TokenERC721",version:"1",chainId:o,verifyingContract:d.contractWrapper.address},t.t3={MintRequest:P.v},t.next=11,d.mapLegacyPayloadToContractStruct(u);case 11:return t.t4=t.sent,t.next=14,t.t0.signTypedData.call(t.t0,t.t1,t.t2,t.t3,t.t4);case 14:f=t.sent,t.next=31;break;case 17:return t.t5=d.contractWrapper,t.t6=p,t.t7=o,t.next=22,d.contractWrapper.address;case 22:return t.t8=t.sent,t.t9={name:"SignatureMintERC721",version:"1",chainId:t.t7,verifyingContract:t.t8},t.t10={MintRequest:P.x},t.next=27,d.mapPayloadToContractStruct(u);case 27:return t.t11=t.sent,t.next=30,t.t5.signTypedData.call(t.t5,t.t6,t.t9,t.t10,t.t11);case 30:f=t.sent;case 31:return t.abrupt("return",{payload:u,signature:f.toString()});case 32:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}()));case 17:return t.abrupt("return",t.sent);case 18:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"mapPayloadToContractStruct",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r){var e;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,E.n)(this.contractWrapper.getProvider(),r.price,r.currencyAddress);case 2:return e=t.sent,t.abrupt("return",{to:r.to,royaltyRecipient:r.royaltyRecipient,royaltyBps:r.royaltyBps,primarySaleRecipient:r.primarySaleRecipient,uri:r.uri,quantity:r.quantity,pricePerToken:e,currency:r.currencyAddress,validityStartTimestamp:r.mintStartTime,validityEndTimestamp:r.mintEndTime,uid:r.uid});case 4:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"mapLegacyPayloadToContractStruct",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r){var e;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,E.n)(this.contractWrapper.getProvider(),r.price,r.currencyAddress);case 2:return e=t.sent,t.abrupt("return",{to:r.to,price:e,uri:r.uri,currency:r.currencyAddress,validityEndTimestamp:r.mintEndTime,validityStartTimestamp:r.mintStartTime,uid:r.uid,royaltyRecipient:r.royaltyRecipient,royaltyBps:r.royaltyBps,primarySaleRecipient:r.primarySaleRecipient});case 4:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"isLegacyNFTContract",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,k.d)(this.contractWrapper,"ERC721SignatureMintV1"));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}(),G=function(){function t(r,e,n){var a=this;(0,p.Z)(this,t),(0,d.Z)(this,"featureName",y.cY.name),(0,d.Z)(this,"transfer",(0,w.d)(function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r,e){var n,i,u,o;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([a.contractWrapper.getSignerAddress(),(0,y.aL)(r)]);case 2:return n=t.sent,i=(0,c.Z)(n,2),u=i[0],o=i[1],t.abrupt("return",w.T.fromContractWrapper({contractWrapper:a.contractWrapper,method:"transferFrom(address,address,uint256)",args:[u,o,e]}));case 7:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}())),(0,d.Z)(this,"transferFrom",(0,w.d)(function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r,e,n){var i,u,o,p;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([(0,y.aL)(r),(0,y.aL)(e)]);case 2:return i=t.sent,u=(0,c.Z)(i,2),o=u[0],p=u[1],t.abrupt("return",w.T.fromContractWrapper({contractWrapper:a.contractWrapper,method:"transferFrom(address,address,uint256)",args:[o,p,n]}));case 7:case"end":return t.stop()}}),t)})));return function(r,e,n){return t.apply(this,arguments)}}())),(0,d.Z)(this,"setApprovalForAll",(0,w.d)(function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r,e){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=w.T,t.t1=a.contractWrapper,t.next=4,(0,y.aL)(r);case 4:return t.t2=t.sent,t.t3=e,t.t4=[t.t2,t.t3],t.t5={contractWrapper:t.t1,method:"setApprovalForAll",args:t.t4},t.abrupt("return",t.t0.fromContractWrapper.call(t.t0,t.t5));case 9:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}())),(0,d.Z)(this,"setApprovalForToken",(0,w.d)(function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r,e){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=w.T,t.t1=a.contractWrapper,t.next=4,(0,y.aL)(r);case 4:return t.t2=t.sent,t.t3=e,t.t4=[t.t2,t.t3],t.t5={contractWrapper:t.t1,method:"approve",args:t.t4},t.abrupt("return",t.t0.fromContractWrapper.call(t.t0,t.t5));case 9:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}())),(0,d.Z)(this,"mint",(0,w.d)(function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=a.mintTo,t.next=3,a.contractWrapper.getSignerAddress();case 3:return t.t1=t.sent,t.t2=r,t.abrupt("return",t.t0.prepare.call(t.t0,t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}())),(0,d.Z)(this,"mintTo",(0,w.d)(function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r,e){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,g.a)(a.mintable,y.cR).to.prepare(r,e));case 1:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}())),(0,d.Z)(this,"mintBatch",(0,w.d)(function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=a.mintBatchTo,t.next=3,a.contractWrapper.getSignerAddress();case 3:return t.t1=t.sent,t.t2=r,t.abrupt("return",t.t0.prepare.call(t.t0,t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}())),(0,d.Z)(this,"mintBatchTo",(0,w.d)(function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r,e){var n;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,g.a)(null===(n=a.mintable)||void 0===n?void 0:n.batch,y.cQ).to.prepare(r,e));case 1:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}())),(0,d.Z)(this,"burn",(0,w.d)(function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,g.a)(a.burnable,y.cI).token.prepare(r));case 1:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}())),(0,d.Z)(this,"cancel",(0,w.d)(function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,g.a)(a.loyaltyCard,y.cO).cancel.prepare(r));case 1:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}())),(0,d.Z)(this,"revoke",(0,w.d)(function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,g.a)(a.loyaltyCard,y.cO).revoke.prepare(r));case 1:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}())),(0,d.Z)(this,"lazyMint",(0,w.d)(function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r,e){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,g.a)(a.lazyMintable,y.cM).lazyMint.prepare(r,e));case 1:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}())),(0,d.Z)(this,"updateMetadata",(0,w.d)(function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r,e){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.lazyMintable){t.next=2;break}return t.abrupt("return",a.lazyMintable.updateMetadata.prepare(r,e));case 2:return t.abrupt("return",(0,g.a)(a.updatableMetadata,y.cP).update.prepare(r,e));case 3:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}())),(0,d.Z)(this,"claim",(0,w.d)(function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r,e){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=a.claimTo,t.next=3,a.contractWrapper.getSignerAddress();case 3:return t.t1=t.sent,t.t2=r,t.t3=e,t.abrupt("return",t.t0.prepare.call(t.t0,t.t1,t.t2,t.t3));case 7:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}())),(0,d.Z)(this,"claimTo",(0,w.d)(function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r,e,n){var c,i,u;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=a.claimWithConditions,i=a.claimCustom,u=a.claimZora,!c){t.next=5;break}return t.abrupt("return",c.to.prepare(r,e,n));case 5:if(!i){t.next=7;break}return t.abrupt("return",i.to.prepare(r,e,n));case 7:if(!u){t.next=9;break}return t.abrupt("return",u.to.prepare(r,e,n));case 9:throw new y.x(y.cL);case 10:case"end":return t.stop()}}),t)})));return function(r,e,n){return t.apply(this,arguments)}}())),this.contractWrapper=r,this.storage=e,this.query=this.detectErc721Enumerable(),this.mintable=this.detectErc721Mintable(),this.burnable=this.detectErc721Burnable(),this.lazyMintable=this.detectErc721LazyMintable(),this.tieredDropable=this.detectErc721TieredDrop(),this.signatureMintable=this.detectErc721SignatureMintable(),this.claimWithConditions=this.detectErc721ClaimableWithConditions(),this.claimCustom=this.detectErc721Claimable(),this.claimZora=this.detectErc721ClaimableZora(),this.erc721SharedMetadata=this.detectErc721SharedMetadata(),this.loyaltyCard=this.detectErc721LoyaltyCard(),this.updatableMetadata=this.detectErc721UpdatableMetadata(),this._chainId=n}return(0,o.Z)(t,[{key:"chainId",get:function(){return this._chainId}},{key:"onNetworkUpdated",value:function(t){this.contractWrapper.updateSignerOrProvider(t)}},{key:"getAddress",value:function(){return this.contractWrapper.address}},{key:"get",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r){var e,a,i,u;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([this.ownerOf(r).catch((function(){return v.d})),this.getTokenMetadata(r).catch((function(){return(0,n.Z)({id:r.toString(),uri:""},x.F)}))]);case 2:return e=t.sent,a=(0,c.Z)(e,2),i=a[0],u=a[1],t.abrupt("return",{owner:i,metadata:u,type:"ERC721",supply:"1"});case 7:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"ownerOf",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.contractWrapper.read("ownerOf",[r]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"balanceOf",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this.contractWrapper,t.next=3,(0,y.aL)(r);case 3:return t.t1=t.sent,t.t2=[t.t1],t.next=7,t.t0.read.call(t.t0,"balanceOf",t.t2);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"balance",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.contractWrapper.getSignerAddress();case 3:return t.t1=t.sent,t.next=6,t.t0.balanceOf.call(t.t0,t.t1);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"isApproved",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r,e){var n,a,i,u;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([(0,y.aL)(r),(0,y.aL)(e)]);case 2:return n=t.sent,a=(0,c.Z)(n,2),i=a[0],u=a[1],t.next=8,this.contractWrapper.read("isApprovedForAll",[i,u]);case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t,this)})));return function(r,e){return t.apply(this,arguments)}}()},{key:"getAll",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,g.a)(this.query,y.cV).all(r));case 1:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"getAllOwners",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,g.a)(this.query,y.cV).allOwners(r));case 1:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"totalCount",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.nextTokenIdToMint());case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"totalCirculatingSupply",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,g.a)(this.query,y.cV).totalCirculatingSupply());case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getOwned",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r,e){var n,a,i,o,p,d,f=this;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=4;break}return t.next=3,(0,y.aL)(r);case 3:r=t.sent;case 4:if(null===(n=this.query)||void 0===n||!n.owned){t.next=8;break}return t.abrupt("return",this.query.owned.all(r,e));case 8:return t.next=10,Promise.all([r||this.contractWrapper.getSignerAddress(),this.getAllOwners(e)]);case 10:return a=t.sent,i=(0,c.Z)(a,2),o=i[0],p=i[1],d=(p||[]).filter((function(t){var r;return(null===o||void 0===o?void 0:o.toLowerCase())===(null===(r=t.owner)||void 0===r?void 0:r.toLowerCase())})),t.next=17,Promise.all(d.map(function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",f.get(r.tokenId));case 1:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}()));case 17:return t.abrupt("return",t.sent);case 18:case"end":return t.stop()}}),t,this)})));return function(r,e){return t.apply(this,arguments)}}()},{key:"getOwnedTokenIds",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r){var e,n,a,i,u;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r){t.next=4;break}return t.next=3,(0,y.aL)(r);case 3:r=t.sent;case 4:if(null===(e=this.query)||void 0===e||!e.owned){t.next=8;break}return t.abrupt("return",this.query.owned.tokenIds(r));case 8:return t.next=10,Promise.all([r||this.contractWrapper.getSignerAddress(),this.getAllOwners()]);case 10:return n=t.sent,a=(0,c.Z)(n,2),i=a[0],u=a[1],t.abrupt("return",(u||[]).filter((function(t){var r;return(null===i||void 0===i?void 0:i.toLowerCase())===(null===(r=t.owner)||void 0===r?void 0:r.toLowerCase())})).map((function(t){return h.O$.from(t.tokenId)})));case 15:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"getMintTransaction",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r,e){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.mintTo.prepare(r,e));case 1:case"end":return t.stop()}}),t,this)})));return function(r,e){return t.apply(this,arguments)}}()},{key:"update",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r,e){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.updateMetadata(r,e));case 1:case"end":return t.stop()}}),t,this)})));return function(r,e){return t.apply(this,arguments)}}()},{key:"getClaimTransaction",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r,e,n){var a,c;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=this.claimWithConditions,c=this.claimCustom,!a){t.next=4;break}return t.abrupt("return",a.conditions.getClaimTransaction(r,e,n));case 4:if(!c){t.next=6;break}return t.abrupt("return",c.getClaimTransaction(r,e,n));case 6:throw new y.x(y.cL);case 7:case"end":return t.stop()}}),t,this)})));return function(r,e,n){return t.apply(this,arguments)}}()},{key:"totalClaimedSupply",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(){var r;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.contractWrapper,!(0,k.h)("totalMinted",r)){t.next=3;break}return t.abrupt("return",this.contractWrapper.read("totalMinted",[]));case 3:if(!(0,k.h)("nextTokenIdToClaim",r)){t.next=5;break}return t.abrupt("return",this.contractWrapper.read("nextTokenIdToClaim",[]));case 5:throw new Error("No function found on contract to get total claimed supply");case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"totalUnclaimedSupply",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(){var r,e,n,a;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([this.nextTokenIdToMint(),this.totalClaimedSupply()]);case 2:return r=t.sent,e=(0,c.Z)(r,2),n=e[0],a=e[1],t.abrupt("return",n.sub(a));case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"claimConditions",get:function(){return(0,g.a)(this.claimWithConditions,y.cJ).conditions}},{key:"tieredDrop",get:function(){return(0,g.a)(this.tieredDropable,y.cW)}},{key:"signature",get:function(){return(0,g.a)(this.signatureMintable,y.cX)}},{key:"revealer",get:function(){var t;return(0,g.a)(null===(t=this.lazyMintable)||void 0===t?void 0:t.revealer,y.cN)}},{key:"sharedMetadata",get:function(){return(0,g.a)(this.erc721SharedMetadata,y.cS)}},{key:"getTokenMetadata",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(r){var e;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.contractWrapper.read("tokenURI",[r]);case 2:if(e=t.sent){t.next=5;break}throw new y.n;case 5:return t.abrupt("return",(0,x.f)(r,e,this.storage));case 6:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"nextTokenIdToMint",value:function(){var t=(0,u.Z)((0,s.Z)().mark((function t(){var r;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(0,k.h)("nextTokenIdToMint",this.contractWrapper)){t.next=13;break}return t.next=3,this.contractWrapper.read("nextTokenIdToMint",[]);case 3:if(r=t.sent,!(0,k.h)("startTokenId",this.contractWrapper)){t.next=10;break}return t.t0=r,t.next=8,this.contractWrapper.read("startTokenId",[]);case 8:t.t1=t.sent,r=t.t0.sub.call(t.t0,t.t1);case 10:return t.abrupt("return",r);case 13:if(!(0,k.h)("totalSupply",this.contractWrapper)){t.next=19;break}return t.next=16,this.contractWrapper.read("totalSupply",[]);case 16:return t.abrupt("return",t.sent);case 19:throw new Error("Contract requires either `nextTokenIdToMint` or `totalSupply` function available to determine the next token ID to mint");case 20:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"detectErc721Enumerable",value:function(){if((0,k.d)(this.contractWrapper,"ERC721Supply")||(0,k.h)("nextTokenIdToMint",this.contractWrapper))return new _(this,this.contractWrapper)}},{key:"detectErc721Mintable",value:function(){if((0,k.d)(this.contractWrapper,"ERC721Mintable"))return new U(this,this.contractWrapper,this.storage)}},{key:"detectErc721Burnable",value:function(){if((0,k.d)(this.contractWrapper,"ERC721Burnable"))return new N(this.contractWrapper)}},{key:"detectErc721LazyMintable",value:function(){if((0,k.d)(this.contractWrapper,"ERC721LazyMintable"))return new B(this,this.contractWrapper,this.storage)}},{key:"detectErc721TieredDrop",value:function(){if((0,k.d)(this.contractWrapper,"ERC721TieredDrop"))return new X(this,this.contractWrapper,this.storage)}},{key:"detectErc721SignatureMintable",value:function(){if((0,k.d)(this.contractWrapper,"ERC721SignatureMintV1")||(0,k.d)(this.contractWrapper,"ERC721SignatureMintV2"))return new Q(this.contractWrapper,this.storage)}},{key:"detectErc721ClaimableWithConditions",value:function(){if((0,k.d)(this.contractWrapper,"ERC721ClaimConditionsV1")||(0,k.d)(this.contractWrapper,"ERC721ClaimConditionsV2")||(0,k.d)(this.contractWrapper,"ERC721ClaimPhasesV1")||(0,k.d)(this.contractWrapper,"ERC721ClaimPhasesV2"))return new L(this,this.contractWrapper,this.storage)}},{key:"detectErc721Claimable",value:function(){if((0,k.d)(this.contractWrapper,"ERC721ClaimCustom"))return new O(this,this.contractWrapper)}},{key:"detectErc721ClaimableZora",value:function(){if((0,k.d)(this.contractWrapper,"ERC721ClaimZora"))return new A(this,this.contractWrapper)}},{key:"detectErc721SharedMetadata",value:function(){if((0,k.d)(this.contractWrapper,"ERC721SharedMetadata"))return new F(this.contractWrapper,this.storage)}},{key:"detectErc721LoyaltyCard",value:function(){if((0,k.d)(this.contractWrapper,"ERC721LoyaltyCard"))return new D(this.contractWrapper)}},{key:"detectErc721UpdatableMetadata",value:function(){if((0,k.d)(this.contractWrapper,"ERC721UpdatableMetadata"))return new q(this.contractWrapper,this.storage)}}]),t}()}}]);
//# sourceMappingURL=7529.9dd77998.chunk.js.map
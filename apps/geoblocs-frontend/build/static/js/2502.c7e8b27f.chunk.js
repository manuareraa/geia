"use strict";(self.webpackChunkgeoblocs=self.webpackChunkgeoblocs||[]).push([[2502],{66061:function(e,t,r){function n(e){return"string"===typeof e?Number.parseInt(e,"0x"===e.trim().substring(0,2)?16:10):"bigint"===typeof e?Number(e):e}r.d(t,{n:function(){return n}})},2502:function(e,t,r){r.r(t),r.d(t,{EmbeddedWalletConnector:function(){return Q}});var n=r(74165),a=r(15861),i=r(15671),s=r(43144),u=r(97326),o=r(60136),c=r(29388),p=r(17591),l=r(97419),h=r(66061),d=r(24009),f=r(36624),v=r(88301),w=r(61120),m=r(29439),g=r(1413),Z=r(19707),k=r(68408),b=r(5829),y=r(73580),x=r(12644),I=function(){var e;return"true"===localStorage.getItem("IS_THIRDWEB_DEV")?null!==(e=window.localStorage.getItem("THIRDWEB_DEV_URL"))&&void 0!==e?e:"http://localhost:3000":"https://embedded-wallet.thirdweb.com"},L=function(e){return"thirdwebEwsWalletUserId-".concat(e)},E=function(e){return"".concat("walletToken","-").concat(e)},S=function(e,t){return"".concat("a","-").concat(e,"-").concat(t)},O=function(e){return e.COGNITO="Cognito",e.GOOGLE="Google",e.EMAIL_OTP="EmailOtp",e.CUSTOM_JWT="CustomJWT",e.CUSTOM_AUTH_ENDPOINT="CustomAuthEndpoint",e.FACEBOOK="Facebook",e.APPLE="Apple",e}({}),_=function(e){return e.LOGGED_OUT="Logged Out",e.LOGGED_IN_WALLET_UNINITIALIZED="Logged In, Wallet Uninitialized",e.LOGGED_IN_NEW_DEVICE="Logged In, New Device",e.LOGGED_IN_WALLET_INITIALIZED="Logged In, Wallet Initialized",e}({}),W=new Map,A=function(){function e(t){(0,i.Z)(this,e);var r=t.clientId;this.isSupported=!!window.localStorage,this.clientId=r}return(0,s.Z)(e,[{key:"getItem",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isSupported){e.next=4;break}return e.abrupt("return",window.localStorage.getItem(t));case 4:return e.abrupt("return",null!==(r=W.get(t))&&void 0!==r?r:null);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setItem",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isSupported){e.next=4;break}return e.abrupt("return",window.localStorage.setItem(t,r));case 4:W.set(t,r);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"removeItem",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getItem(t);case 2:if(r=e.sent,!this.isSupported||!r){e.next=6;break}return window.localStorage.removeItem(t),e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveAuthCookie",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setItem(E(this.clientId),t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAuthCookie",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getItem(E(this.clientId)));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeAuthCookie",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.removeItem(E(this.clientId)));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"saveDeviceShare",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveWalletUserId(r);case 2:return e.next=4,this.setItem(S(this.clientId,r),t);case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getDeviceShare",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getWalletUserId();case 2:if(!(t=e.sent)){e.next=5;break}return e.abrupt("return",this.getItem(S(this.clientId,t)));case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeDeviceShare",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getWalletUserId();case 2:if(!(t=e.sent)){e.next=5;break}return e.abrupt("return",this.removeItem(S(this.clientId,t)));case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getWalletUserId",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getItem(L(this.clientId)));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"saveWalletUserId",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setItem(L(this.clientId),t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"removeWalletUserId",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.removeItem(L(this.clientId)));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function D(e){return new Promise((function(t){setTimeout(t,1e3*e)}))}var N={height:"100%",width:"100%",border:"none",backgroundColor:"transparent",colorScheme:"light",position:"fixed",top:"0px",right:"0px",zIndex:"2147483646",display:"none"},C=new Map,T=function(){function e(t){var r=this;(0,i.Z)(this,e);var n=t.link,a=t.iframeId,s=t.container,u=void 0===s?document.body:s,o=t.iframeStyles,c=t.onIframeInitialize;(0,p._)(this,"POLLING_INTERVAL_SECONDS",1.4),this.iframeBaseUrl=I();var l=document.getElementById(a),h=new URL(n),d="2.5.15";if(h.searchParams.set("sdkVersion",d),!l||l.src!==h.href){if(!l){l=document.createElement("iframe");var f=(0,g.Z)((0,g.Z)({},N),o);Object.assign(l.style,f),l.setAttribute("id",a),l.setAttribute("fetchpriority","high"),u.appendChild(l)}l.src=h.href,l.setAttribute("data-version",d);window.addEventListener("message",(function e(t){if("ewsIframeLoaded"===t.data.eventType){if(window.removeEventListener("message",e),!l)return void console.warn("thirdweb Iframe not found");r.onIframeLoadHandler(l,c)()}}))}this.iframe=l}return(0,s.Z)(e,[{key:"onIframeLoadedInitVariables",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"onIframeLoadHandler",value:function(e,t){var r=this;return(0,a.Z)((0,n.Z)().mark((function i(){var s;return(0,n.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return s=new Promise(function(){var i=(0,a.Z)((0,n.Z)().mark((function a(i,s){var u,o,c;return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((o=new MessageChannel).port1.onmessage=function(r){var n=r.data;return o.port1.close(),n.success?(C.set(e.src,!0),t&&t(),i(!0)):s(new Error(n.error))},c="initIframe",null!==e&&void 0!==e&&null!==(u=e.contentWindow)&&void 0!==u){n.next=7;break}n.next=16;break;case 7:return n.t0=u,n.t1=c,n.next=11,r.onIframeLoadedInitVariables();case 11:n.t2=n.sent,n.t3={eventType:n.t1,data:n.t2},n.t4=r.iframeBaseUrl,n.t5=[o.port2],n.t0.postMessage.call(n.t0,n.t3,n.t4,n.t5);case 16:case"end":return n.stop()}}),a)})));return function(e,t){return i.apply(this,arguments)}}()),i.next=3,s;case 3:case"end":return i.stop()}}),i)})))}},{key:"call",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,i,s,u,o,c=this;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.procedureName,i=t.params,s=t.showIframe,u=void 0!==s&&s;case 1:if(C.get(this.iframe.src)){e.next=6;break}return e.next=4,D(this.POLLING_INTERVAL_SECONDS);case 4:e.next=1;break;case 6:if(!u){e.next=10;break}return this.iframe.style.display="block",e.next=10,D(.005);case 10:return o=new Promise((function(e,t){var s,o=new MessageChannel;o.port1.onmessage=function(){var r=(0,a.Z)((0,n.Z)().mark((function r(a){var i;return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=a.data,o.port1.close(),!u){r.next=6;break}return r.next=5,D(.1);case 5:c.iframe.style.display="none";case 6:i.success?e(i.data):t(new Error(i.error));case 7:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),null===(s=c.iframe.contentWindow)||void 0===s||s.postMessage({eventType:r,data:i},c.iframeBaseUrl,[o.port2])})),e.abrupt("return",o);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"destroy",value:function(){C.delete(this.iframe.src)}}]),e}(),U=function(e){(0,o.Z)(r,e);var t=(0,c.Z)(r);function r(e){var n;(0,i.Z)(this,r);var a=e.clientId,s=e.customizationOptions;return(n=t.call(this,{iframeId:G,link:P({clientId:a,path:"/sdk/2022-08-12/embedded-wallet",queryParams:s}).href,container:document.body})).clientId=a,n}return(0,s.Z)(r,[{key:"onIframeLoadedInitVariables",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new A({clientId:this.clientId}),e.next=3,t.getAuthCookie();case 3:return e.t0=e.sent,e.next=6,t.getDeviceShare();case 6:return e.t1=e.sent,e.next=9,t.getWalletUserId();case 9:return e.t2=e.sent,e.t3=this.clientId,e.abrupt("return",{authCookie:e.t0,deviceShareStored:e.t1,walletUserId:e.t2,clientId:e.t3});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(T);function P(e){var t=e.clientId,r=e.path,n=e.queryParams,a=new URL("".concat(r),I());if(n)for(var i=0,s=Object.keys(n);i<s.length;i++){var u,o=s[i];a.searchParams.set(o,(null===(u=n[o])||void 0===u?void 0:u.toString())||"")}return a.searchParams.set("clientId",t),a}var G="thirdweb-embedded-wallet-iframe",M=function(){function e(t){(0,i.Z)(this,e);var r=t.querier,n=t.preLogin,a=t.postLogin,s=t.clientId;this.LoginQuerier=r,this.preLogin=n,this.postLogin=a,this.clientId=s}return(0,s.Z)(e,[{key:"sendEmailLoginOtp",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.email,e.next=3,this.preLogin();case 3:return e.next=5,this.LoginQuerier.call({procedureName:"sendThirdwebEmailLoginOtp",params:{email:r}});case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendSmsLoginOtp",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.phoneNumber,e.next=3,this.preLogin();case 3:return e.next=5,this.LoginQuerier.call({procedureName:"sendThirdwebSmsLoginOtp",params:{phoneNumber:r}});case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),B=function(e){(0,o.Z)(r,e);var t=(0,c.Z)(r);function r(){var e;return(0,i.Z)(this,r),e=t.apply(this,arguments),(0,p._)((0,u.Z)(e),"closeWindow",(function(e){var t=e.isWindowOpenedByFn,r=e.win,n=e.closeOpenedWindow;t?null===r||void 0===r||r.close():r&&n?n(r):r&&r.close()})),e}return(0,s.Z)(r,[{key:"getOauthLoginUrl",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.LoginQuerier.call({procedureName:"getHeadlessOauthLoginLink",params:{authProvider:t}});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loginWithModal",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.preLogin();case 2:return e.next=4,this.LoginQuerier.call({procedureName:"loginWithThirdwebModal",params:void 0,showIframe:!0});case 4:return t=e.sent,e.abrupt("return",this.postLogin(t));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loginWithEmailOtp",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.email,e.next=3,this.preLogin();case 3:return e.next=5,this.LoginQuerier.call({procedureName:"loginWithThirdwebModal",params:{email:r},showIframe:!0});case 5:return a=e.sent,e.abrupt("return",this.postLogin(a));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getOauthPopUpSizing",value:function(e){return e===O.FACEBOOK?"width=715, height=555":"width=350, height=500"}},{key:"loginWithOauth",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,i,s,u,o,c,p=this;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null===t||void 0===t?void 0:t.openedWindow,i=!1,r||(r=window.open("","Login",this.getOauthPopUpSizing(t.oauthProvider)),i=!0),r){e.next=5;break}throw new Error("Something went wrong opening pop-up");case 5:return e.next=7,Promise.all([this.getOauthLoginUrl(t.oauthProvider),this.preLogin()]);case 7:return s=e.sent,u=(0,m.Z)(s,1),o=u[0].loginLink,r.location.href=o,e.next=13,new Promise((function(e,s){var u=window.setInterval((0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:r.closed&&(clearInterval(u),window.removeEventListener("message",o),s(new Error("User closed login window")));case 3:case"end":return e.stop()}}),e)}))),1e3),o=function(){var c=(0,a.Z)((0,n.Z)().mark((function a(c){var l;return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c.origin===I()){n.next=2;break}return n.abrupt("return");case 2:if("object"===typeof c.data){n.next=5;break}return s(new Error("Invalid event data")),n.abrupt("return");case 5:n.t0=c.data.eventType,n.next="userLoginSuccess"===n.t0?8:"userLoginFailed"===n.t0?13:"injectDeveloperClientId"===n.t0?18:20;break;case 8:return window.removeEventListener("message",o),clearInterval(u),p.closeWindow({isWindowOpenedByFn:i,win:r,closeOpenedWindow:null===t||void 0===t?void 0:t.closeOpenedWindow}),c.data.authResult&&e(c.data.authResult),n.abrupt("break",20);case 13:return window.removeEventListener("message",o),clearInterval(u),p.closeWindow({isWindowOpenedByFn:i,win:r,closeOpenedWindow:null===t||void 0===t?void 0:t.closeOpenedWindow}),s(new Error(c.data.error)),n.abrupt("break",20);case 18:return null===(l=r)||void 0===l||l.postMessage({eventType:"injectDeveloperClientIdResult",developerClientId:p.clientId,authOption:t.oauthProvider},I()),n.abrupt("break",20);case 20:case"end":return n.stop()}}),a)})));return function(e){return c.apply(this,arguments)}}();window.addEventListener("message",o)}));case 13:return c=e.sent,e.abrupt("return",this.postLogin({storedToken:(0,g.Z)((0,g.Z)({},c.storedToken),{},{shouldStoreCookieString:!0}),walletDetails:(0,g.Z)((0,g.Z)({},c.walletDetails),{},{isIframeStorageEnabled:!1})}));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loginWithCustomJwt",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.encryptionKey,a=t.jwt,e.next=3,this.preLogin();case 3:return e.next=5,this.LoginQuerier.call({procedureName:"loginWithCustomJwt",params:{encryptionKey:r,jwt:a}});case 5:return i=e.sent,e.abrupt("return",this.postLogin(i));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loginWithCustomAuthEndpoint",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.encryptionKey,a=t.payload,e.next=3,this.preLogin();case 3:return e.next=5,this.LoginQuerier.call({procedureName:"loginWithCustomAuthEndpoint",params:{encryptionKey:r,payload:a}});case 5:return i=e.sent,e.abrupt("return",this.postLogin(i));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"verifyEmailLoginOtp",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,i,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.email,a=t.otp,i=t.recoveryCode,e.next=3,this.LoginQuerier.call({procedureName:"verifyThirdwebEmailLoginOtp",params:{email:r,otp:a,recoveryCode:i}});case 3:return s=e.sent,e.abrupt("return",this.postLogin(s));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"verifySmsLoginOtp",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,i,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.phoneNumber,a=t.otp,i=t.recoveryCode,e.next=3,this.LoginQuerier.call({procedureName:"verifyThirdwebSmsLoginOtp",params:{phoneNumber:r,otp:a,recoveryCode:i}});case 3:return s=e.sent,e.abrupt("return",this.postLogin(s));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(M),R=function(){function e(t){var r=this;(0,i.Z)(this,e);var s=t.clientId,u=t.querier,o=t.onAuthSuccess;this.clientId=s,this.AuthQuerier=u,this.localStorage=new A({clientId:s}),this.onAuthSuccess=o,this.BaseLogin=new B({postLogin:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.postLogin(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),preLogin:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.preLogin();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),querier:u,clientId:s})}return(0,s.Z)(e,[{key:"preLogin",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.logout();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"postLogin",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.storedToken,a=t.walletDetails,!r.shouldStoreCookieString){e.next=4;break}return e.next=4,this.localStorage.saveAuthCookie(r.cookieString);case 4:return e.next=6,this.onAuthSuccess({storedToken:r,walletDetails:a});case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loginWithModal",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.BaseLogin.loginWithModal());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loginWithEmailOtp",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.BaseLogin.loginWithEmailOtp(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loginWithCustomJwt",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.BaseLogin.loginWithCustomJwt(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loginWithCustomAuthEndpoint",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.BaseLogin.loginWithCustomAuthEndpoint(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loginWithOauth",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.BaseLogin.loginWithOauth(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailLoginOtp",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.email,e.abrupt("return",this.BaseLogin.sendEmailLoginOtp({email:r}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendSmsLoginOtp",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.phoneNumber,e.abrupt("return",this.BaseLogin.sendSmsLoginOtp({phoneNumber:r}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"verifyEmailLoginOtp",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.BaseLogin.verifyEmailLoginOtp(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"verifySmsLoginOtp",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.BaseLogin.verifySmsLoginOtp(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t,r,a,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.AuthQuerier.call({procedureName:"logout",params:void 0});case 2:return t=e.sent,r=t.success,e.next=6,this.localStorage.removeAuthCookie();case 6:return a=e.sent,e.next=9,this.localStorage.removeWalletUserId();case 9:return i=e.sent,e.abrupt("return",{success:r||a||i});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),q=function(e){(0,o.Z)(r,e);var t=(0,c.Z)(r);function r(e){var n,a;(0,i.Z)(this,r);var s=e.provider,o=e.clientId,c=e.querier;return a=t.call(this),(0,p._)((0,u.Z)(a),"DEFAULT_ETHEREUM_CHAIN_ID",5),a.clientId=o,a.querier=c,a.endpoint=null===(n=s.connection)||void 0===n?void 0:n.url,(0,y.defineReadOnly)((0,u.Z)(a),"provider",s),a}return(0,s.Z)(r,[{key:"getAddress",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.querier.call({procedureName:"getAddress",params:void 0});case 2:return t=e.sent,r=t.address,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"signMessage",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,i,s,u;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this.querier,e.t1=t,e.next=4,null===(i=this.provider)||void 0===i?void 0:i.getNetwork();case 4:if(e.t4=a=e.sent,e.t3=null===e.t4,e.t3){e.next=8;break}e.t3=void 0===a;case 8:if(!e.t3){e.next=12;break}e.t5=void 0,e.next=13;break;case 12:e.t5=a.chainId;case 13:if(e.t6=r=e.t5,e.t2=null!==e.t6,!e.t2){e.next=17;break}e.t2=void 0!==r;case 17:if(!e.t2){e.next=21;break}e.t7=r,e.next=22;break;case 21:e.t7=this.DEFAULT_ETHEREUM_CHAIN_ID;case 22:return e.t8=e.t7,e.t9=this.endpoint,e.t10={message:e.t1,chainId:e.t8,rpcEndpoint:e.t9},e.t11={procedureName:"signMessage",params:e.t10},e.next=28,e.t0.call.call(e.t0,e.t11);case 28:return s=e.sent,u=s.signedMessage,e.abrupt("return",u);case 31:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signTransaction",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,i,s,u;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this.querier,e.t1=t,e.next=4,null===(i=this.provider)||void 0===i?void 0:i.getNetwork();case 4:if(e.t4=a=e.sent,e.t3=null===e.t4,e.t3){e.next=8;break}e.t3=void 0===a;case 8:if(!e.t3){e.next=12;break}e.t5=void 0,e.next=13;break;case 12:e.t5=a.chainId;case 13:if(e.t6=r=e.t5,e.t2=null!==e.t6,!e.t2){e.next=17;break}e.t2=void 0!==r;case 17:if(!e.t2){e.next=21;break}e.t7=r,e.next=22;break;case 21:e.t7=this.DEFAULT_ETHEREUM_CHAIN_ID;case 22:return e.t8=e.t7,e.t9=this.endpoint,e.t10={transaction:e.t1,chainId:e.t8,rpcEndpoint:e.t9},e.t11={procedureName:"signTransaction",params:e.t10},e.next=28,e.t0.call.call(e.t0,e.t11);case 28:return s=e.sent,u=s.signedTransaction,e.abrupt("return",u);case 31:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendTransaction",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var a,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.provider){e.next=2;break}throw new Error("Provider not found");case 2:return e.next=4,(0,x.g)(this.provider);case 4:return a=e.sent,i=(0,g.Z)((0,g.Z)({},a),t),e.abrupt("return",(0,v.Z)((0,w.Z)(r.prototype),"sendTransaction",this).call(this,i));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_signTypedData",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r,a){var i,s,u,o,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this.querier,e.t1=t,e.t2=r,e.t3=a,e.next=6,null===(u=this.provider)||void 0===u?void 0:u.getNetwork();case 6:if(e.t6=s=e.sent,e.t5=null===e.t6,e.t5){e.next=10;break}e.t5=void 0===s;case 10:if(!e.t5){e.next=14;break}e.t7=void 0,e.next=15;break;case 14:e.t7=s.chainId;case 15:if(e.t8=i=e.t7,e.t4=null!==e.t8,!e.t4){e.next=19;break}e.t4=void 0!==i;case 19:if(!e.t4){e.next=23;break}e.t9=i,e.next=24;break;case 23:e.t9=this.DEFAULT_ETHEREUM_CHAIN_ID;case 24:return e.t10=e.t9,e.t11=this.endpoint,e.t12={domain:e.t1,types:e.t2,message:e.t3,chainId:e.t10,rpcEndpoint:e.t11},e.t13={procedureName:"signTypedDataV4",params:e.t12},e.next=30,e.t0.call.call(e.t0,e.t13);case 30:return o=e.sent,c=o.signedTypedData,e.abrupt("return",c);case 33:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"connect",value:function(e){return new r({clientId:this.clientId,provider:e,querier:this.querier})}}]),r}(k.Signer),F=function(){function e(t){(0,i.Z)(this,e);var r=t.clientId,n=t.chain,a=t.querier;this.clientId=r,this.chain=n,this.walletManagerQuerier=a,this.localStorage=new A({clientId:r})}return(0,s.Z)(e,[{key:"postWalletSetUp",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,i,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.deviceShareStored,a=t.walletAddress,i=t.isIframeStorageEnabled,s=t.walletUserId,i){e.next=4;break}return e.next=4,this.localStorage.saveDeviceShare(r,s);case 4:return e.abrupt("return",{walletAddress:a});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUserWalletStatus",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.walletManagerQuerier.call({procedureName:"getUserStatus",params:void 0});case 2:if((t=e.sent).status!==_.LOGGED_IN_WALLET_INITIALIZED){e.next=7;break}return e.abrupt("return",(0,g.Z)((0,g.Z)({status:_.LOGGED_IN_WALLET_INITIALIZED},t.user),{},{wallet:this}));case 7:if(t.status!==_.LOGGED_IN_NEW_DEVICE){e.next=11;break}return e.abrupt("return",(0,g.Z)({status:_.LOGGED_IN_WALLET_UNINITIALIZED},t.user));case 11:if(t.status!==_.LOGGED_IN_WALLET_UNINITIALIZED){e.next=15;break}return e.abrupt("return",(0,g.Z)({status:_.LOGGED_IN_WALLET_UNINITIALIZED},t.user));case 15:return e.abrupt("return",{status:t.status});case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setChain",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.chain,this.chain=r;case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getEthersJsSigner",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new q({clientId:this.clientId,provider:(0,b.getDefaultProvider)(null!==(r=null===t||void 0===t?void 0:t.rpcEndpoint)&&void 0!==r?r:Z.g1[this.chain]),querier:this.walletManagerQuerier}),e.abrupt("return",a);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),K=function(){function e(t){var r=this;(0,i.Z)(this,e);var s=t.clientId,u=t.chain,o=t.styles,c=t.onAuthSuccess;if(this.isClientIdLegacyPaper(s))throw new Error("You are using a legacy clientId. Please use the clientId found on the thirdweb dashboard settings page");this.clientId=s,this.querier=new U({clientId:s,customizationOptions:o}),this.wallet=new F({clientId:s,chain:u,querier:this.querier}),this.auth=new R({clientId:s,querier:this.querier,onAuthSuccess:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===c||void 0===c||c(t),e.next=3,r.wallet.postWalletSetUp((0,g.Z)((0,g.Z)({},t.walletDetails),{},{walletUserId:t.storedToken.authDetails.userWalletId}));case 3:return e.next=5,r.querier.call({procedureName:"initIframe",params:{deviceShareStored:t.walletDetails.deviceShareStored,clientId:r.clientId,walletUserId:t.storedToken.authDetails.userWalletId,authCookie:t.storedToken.cookieString}});case 5:return e.abrupt("return",{user:{status:_.LOGGED_IN_WALLET_INITIALIZED,authDetails:t.storedToken.authDetails,wallet:r.wallet,walletAddress:t.walletDetails.walletAddress}});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}return(0,s.Z)(e,[{key:"isClientIdLegacyPaper",value:function(e){return e.indexOf("-")>0&&36===e.length}},{key:"getUser",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.wallet.getUserWalletStatus());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Q=(r(30656),function(e){(0,o.Z)(r,e);var t=(0,c.Z)(r);function r(e){var s;return(0,i.Z)(this,r),s=t.call(this),(0,p._)((0,u.Z)(s),"id",d.w.paper),(0,p._)((0,u.Z)(s),"name","Embedded Wallet"),(0,p._)((0,u.Z)(s),"ready",!0),(0,p._)((0,u.Z)(s),"user",null),(0,p._)((0,u.Z)(s),"onAccountsChanged",function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=5;break}return e.next=3,s.onDisconnect();case 3:e.next=6;break;case 5:s.emit("change",{account:l.getAddress(t[0])});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,p._)((0,u.Z)(s),"onChainChanged",(function(e){var t=(0,h.n)(e),r=-1===s.options.chains.findIndex((function(e){return e.chainId===t}));s.emit("change",{chain:{id:t,unsupported:r}})})),(0,p._)((0,u.Z)(s),"onDisconnect",(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.emit("disconnect");case 1:case"end":return e.stop()}}),e)})))),s.options=e,s}return(0,s.Z)(r,[{key:"getEmbeddedWalletSDK",value:function(){return this._embeddedWalletSdk||(this._embeddedWalletSdk=new K({clientId:this.options.clientId,chain:"Ethereum",onAuthSuccess:this.options.onAuthSuccess})),this._embeddedWalletSdk}},{key:"connect",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=9;break}return e.next=3,this.authenticate({strategy:"iframe"});case 3:if((r=e.sent).user){e.next=6;break}throw new Error("Error connecting User");case 6:this.user=r.user,e.next=14;break;case 9:if(t.authResult){e.next=11;break}throw new Error("Missing authData - call authenticate() first with your authentication strategy");case 11:if(t.authResult.user){e.next=13;break}throw new Error("Missing authData.user - call authenticate() first with your authentication strategy");case 13:this.user=t.authResult.user;case 14:return null!==t&&void 0!==t&&t.chainId&&this.switchChain(t.chainId),e.abrupt("return",this.getAddress());case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._embeddedWalletSdk,e.next=3,null===t||void 0===t?void 0:t.auth.logout();case 3:this._signer=void 0,this._embeddedWalletSdk=void 0,this.user=null;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAddress",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.user){e.next=2;break}throw new Error("Embedded Wallet is not connected");case 2:return e.next=4,this.getSigner().then((function(e){return e.getAddress()}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isConnected",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getAddress();case 3:return t=e.sent,e.abrupt("return",!!t);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"getProvider",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSigner();case 2:if((t=e.sent).provider){e.next=5;break}throw new Error("Provider not found");case 5:return e.abrupt("return",t.provider);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSigner",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._signer){e.next=2;break}return e.abrupt("return",this._signer);case 2:return e.next=4,this.getUser();case 4:return t=e.sent,e.next=7,t.wallet.getEthersJsSigner({rpcEndpoint:this.options.chain.rpc[0]||""});case 7:if(r=e.sent){e.next=10;break}throw new Error("Signer not found");case 10:return this._signer=r,e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isAuthorized",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"switchChain",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.options.chains.find((function(e){return e.chainId===t}))){e.next=3;break}throw new Error("Chain not configured");case 3:return e.prev=3,e.next=6,null===(a=this.user)||void 0===a?void 0:a.wallet.setChain({chain:"Ethereum"});case 6:return e.next=8,null===(i=this.user)||void 0===i?void 0:i.wallet.getEthersJsSigner({rpcEndpoint:r.rpc[0]||""});case 8:this._signer=e.sent,this.emit("change",{chain:{id:t,unsupported:!1}}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),console.warn("Failed to switch chain",e.t0);case 15:case"end":return e.stop()}}),e,this,[[3,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"setupListeners",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"updateChains",value:function(e){this.options.chains=e}},{key:"getUser",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.user&&this.user.wallet&&this.user.wallet.getEthersJsSigner){e.next=11;break}return t=this.getEmbeddedWalletSDK(),e.next=4,t.getUser();case 4:r=e.sent,e.t0=r.status,e.next=e.t0===_.LOGGED_IN_WALLET_INITIALIZED?8:10;break;case 8:return this.user=r,e.abrupt("break",11);case 10:throw new Error("Embedded Wallet is not authenticated, please authenticate first");case 11:return e.abrupt("return",this.user);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getEmail",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUser();case 2:return t=e.sent,e.abrupt("return",t.authDetails.email);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getPhoneNumber",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUser();case 2:return t=e.sent,e.abrupt("return",t.authDetails.phoneNumber);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getRecoveryInformation",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUser();case 2:return t=e.sent,e.abrupt("return",t.authDetails);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sendVerificationEmail",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.email,a=this.getEmbeddedWalletSDK(),e.abrupt("return",a.auth.sendEmailLoginOtp({email:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendVerificationSms",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.phoneNumber,a=this.getEmbeddedWalletSDK(),e.abrupt("return",a.auth.sendSmsLoginOtp({phoneNumber:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"authenticate",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this.getEmbeddedWalletSDK(),a=t.strategy,e.t0=a,e.next="email_verification"===e.t0?5:"phone_number_verification"===e.t0?8:"apple"===e.t0||"facebook"===e.t0||"google"===e.t0?11:"jwt"===e.t0?13:"auth_endpoint"===e.t0?14:"iframe_email_verification"===e.t0?15:"iframe"===e.t0?16:17;break;case 5:return e.next=7,r.auth.verifyEmailLoginOtp({email:t.email,otp:t.verificationCode,recoveryCode:t.recoveryCode});case 7:return e.abrupt("return",e.sent);case 8:return e.next=10,r.auth.verifySmsLoginOtp({phoneNumber:t.phoneNumber,otp:t.verificationCode,recoveryCode:t.recoveryCode});case 10:return e.abrupt("return",e.sent);case 11:return i=H[a],e.abrupt("return",r.auth.loginWithOauth({oauthProvider:i,closeOpenedWindow:t.closeOpenedWindow,openedWindow:t.openedWindow}));case 13:return e.abrupt("return",r.auth.loginWithCustomJwt({jwt:t.jwt,encryptionKey:t.encryptionKey}));case 14:return e.abrupt("return",r.auth.loginWithCustomAuthEndpoint({payload:t.payload,encryptionKey:t.encryptionKey}));case 15:return e.abrupt("return",r.auth.loginWithEmailOtp({email:t.email}));case 16:return e.abrupt("return",r.auth.loginWithModal());case 17:V(a);case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(f.C));function V(e){throw new Error("Invalid param: "+e)}var H={google:O.GOOGLE,facebook:O.FACEBOOK,apple:O.APPLE}},19707:function(e,t,r){r.d(t,{OB:function(){return a},g1:function(){return n}});var n={Ethereum:"https://ethereum.rpc.thirdweb.com",Goerli:"https://goerli.rpc.thirdweb.com",Mumbai:"https://mumbai.rpc.thirdweb.com",Polygon:"https://polygon.rpc.thirdweb.com",Avalanche:"https://avalanche.rpc.thirdweb.com",Optimism:"https://optimism.rpc.thirdweb.com",OptimismGoerli:"https://optimism-goerli.rpc.thirdweb.com",BSC:"https://binance.rpc.thirdweb.com",BSCTestnet:"https://binance-testnet.rpc.thirdweb.com",ArbitrumOne:"https://arbitrum.rpc.thirdweb.com",ArbitrumGoerli:"https://arbitrum-goerli.rpc.thirdweb.com",Fantom:"https://fantom.rpc.thirdweb.com",FantomTestnet:"https://fantom-testnet.rpc.thirdweb.com",Sepolia:"https://sepolia.rpc.thirdweb.com",AvalancheFuji:"https://avalanche-fuji.rpc.thirdweb.com"},a=function(){var e;return"undefined"!=typeof window&&"true"===window.localStorage.getItem("IS_PAPER_DEV")?null!=(e=window.localStorage.getItem("PAPER_DEV_URL"))?e:"http://localhost:3000":"undefined"!=typeof window&&window.location.origin.includes("paper.xyz")||"undefined"!=typeof window&&window.location.origin.includes("thirdweb.com")?window.location.origin:"https://withpaper.com"}}}]);
//# sourceMappingURL=2502.c7e8b27f.chunk.js.map